(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{117:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return i}));var a=n(12),c="ky-ant",r="ky-anticon",o=Object(a.f)("ky-code"),l=o.prefixName,i=o.prefixClassName},217:function(e,t,n){"use strict";var a=n(248),c=n.n(a),r=n(215),o=n(20),l=n.n(o),i=n(0),s=n.n(i);r.a.register({type:"http",url:"https://static.iovwv.com/nodes/antdv4",namespace:"antd_v4",version:"4.0.0"}),r.a.register({type:"http",url:"https://static.iovwv.com/nodes/ky-echarts",namespace:"ky-echarts",version:"1.0.0"}),r.a.register({namespace:"react",version:"18.2.0",load:function(){return{indexModule:s.a}},loadMeta:function(){return{}}}),r.a.register({namespace:"react-dom",version:"18.2.0",load:function(){return{indexModule:l.a}},loadMeta:function(){return{}}});var m=n(175),u=n.n(m),d=n(121);var p=["div","p","span",{name:"img",propTypes:[{name:"src",caption:"资源地址"},{name:"style",caption:"内联样式"}]},{name:"iframe",propTypes:[{name:"src",caption:"资源地址"},{name:"style",caption:"内联样式"}]},"a","header","footer","video"];p.forEach((function(e){var t="";t="object"===u()(e)?e.name:e,d.a.registerLocal("".concat("html.native",".").concat(t),d.a.NativeComponent(t))}));var v=p.map((function(e){var t,n=[];"object"===u()(e)?(t=e.name,n=e.propTypes||[]):(t=e,n=[{name:"children",caption:"内容"},{name:"style",caption:"内联样式"}]);var a,c=t.toUpperCase();return{path:"/HTML/".concat(c),name:t,caption:c,component:{type:(a=t,d.a.Local("".concat("html.native",".").concat(a))),propTypes:n}}})),f=[{path:"/Antd4.0.2",name:"Antd4.x",meta:{version:"4.0.0",namespace:"antd_v4"}},{path:"/ky-echarts",name:"ky-echarts",caption:"图表",meta:{version:"1.0.0",namespace:"ky-echarts"}}],g=n(254),b=n(781),y=n(801),E=n(799),h=n(798),O=n(797),j=d.i.PropTypes;d.a.registerLocal("Button",b.a),d.a.registerLocal("Checkbox",y.a),d.a.registerLocal("Radio",E.a),d.a.registerLocal("Input",h.a),d.a.registerLocal("Select",O.a);var N=[{path:"/Antd本地/Button",caption:"按钮",component:{type:d.a.Local("Button"),propTypes:[{name:"width",caption:"宽度"},{name:"height",caption:"高度"},{name:"children",initialValue:"按钮"},{name:"style",type:j.Style,initialValue:{}}]}},{path:"/Antd本地/Checkbox",caption:"复选框",component:{type:d.a.Local("Checkbox"),propTypes:[{name:"children",initialValue:"复选框"},{name:"style",type:j.Style,initialValue:{}}]}},{path:"/Antd本地/Radio",caption:"单选框",component:{type:d.a.Local("Radio"),propTypes:[{name:"children",initialValue:"单选"},{name:"style",type:j.Style,initialValue:{}}]}},{path:"/Antd本地/Input",caption:"输入框",component:{type:d.a.Local("Input"),propTypes:[{name:"style",type:j.Style,initialValue:{}}]}},{path:"/Antd本地/Select",caption:"下拉框",component:{type:d.a.Local("Select"),propTypes:[{name:"style",type:j.Style,initialValue:{}}]}}],C=d.i.PropTypes;d.a.registerLocal("HFlexStack",g.b.H),d.a.registerLocal("VFlexStack",g.b.V),d.a.registerLocal("HFlexStackItem",g.c.H),d.a.registerLocal("VFlexStackItem",g.c.V),d.a.registerLocal("AbsLayout",g.a),d.a.registerLocal("GridLayout",g.d);var S=[{name:"默认",value:""},{name:"向左对齐",value:"left"},{name:"居中对齐",value:"center"},{name:"向右对齐",value:"right"}],x=[{name:"默认",value:""},{name:"顶部对齐",value:"top"},{name:"居中对齐",value:"center"},{name:"底部对齐",value:"bottom"}];t.a={items:[{path:"/容器",expand:!0},{path:"/容器/水平/HFlexStack",caption:"水平Flex容器",accept:["HFlexStackItem"],component:{type:d.a.Local("HFlexStack"),propTypes:[{name:"width",caption:"宽度"},{name:"height",caption:"高度"},{name:"style",type:C.Style,initialValue:{}}]}},{path:"/容器/水平/HFlexStack/HFlexStackItem",caption:"水平FlexItem",dragType:"HFlexStackItem",component:{type:d.a.Local("HFlexStackItem"),propTypes:[{name:"width",caption:"宽度"},{name:"height",caption:"高度"},{name:"vAlign",caption:"垂直对齐",type:C.Enum,options:x,initialValue:""},{name:"hAlign",caption:"水平对齐",type:C.Enum,options:S,initialValue:""},{name:"margin",caption:"间距",initialValue:"20px"},{name:"style",type:C.Style,initialValue:{}}]}},{path:"/容器/垂直/VFlexStack",caption:"垂直Flex容器",accept:["VFlexStack"],component:{type:d.a.Local("VFlexStack"),propTypes:[{name:"width",caption:"宽度"},{name:"height",caption:"高度"},{name:"style",type:C.Style,initialValue:{}}]}},{path:"/容器/垂直/VFlexStack/VFlexStackItem",caption:"垂直FlexItem",dragType:"VFlexStackItem",component:{type:d.a.Local("VFlexStackItem"),propTypes:[{name:"width",caption:"宽度"},{name:"height",caption:"高度"},{name:"vAlign",caption:"垂直对齐",type:C.Enum,options:x,initialValue:""},{name:"hAlign",caption:"水平对齐",type:C.Enum,options:S,initialValue:""},{name:"margin",caption:"间距",initialValue:"20px"},{name:"style",type:C.Style,initialValue:{}}]}},{path:"/容器/AbsPanel",name:"AbsLayout",caption:"绝对布局",component:{type:d.a.Local("AbsLayout"),propTypes:[{name:"axisLineEnabled",caption:"辅助线",type:C.Boolean,initialValue:!1},{name:"autoResizing",caption:"自适应视图",type:C.Boolean,initialValue:!1}]}},{path:"/容器/GridPanel",name:"GridLayout",caption:"网格布局",component:{type:d.a.Local("GridLayout"),propTypes:[{name:"responsive",caption:"响应式布局",type:C.Boolean,initialValue:!0},{name:"cols",caption:"列数",type:C.Number,initialValue:24},{name:"rows",caption:"行数",type:C.Number,initialValue:4},{name:"marginX",caption:"水平间距",type:C.Number,initialValue:10},{name:"marginY",caption:"垂直间距",type:C.Number,initialValue:10},{name:"paddingLeft",caption:"左边空隙",type:C.Number,initialValue:0},{name:"paddingRight",caption:"右边空隙",type:C.Number,initialValue:0},{name:"paddingTop",caption:"顶部空隙",type:C.Number,initialValue:0},{name:"paddingBottom",caption:"底部空隙",type:C.Number,initialValue:0},{name:"draggable",caption:"可拖拽",type:C.Boolean,initialValue:!0},{name:"resizable",caption:"可改变大小",type:C.Boolean,initialValue:!0}]}}].concat(c()(f),c()(v),c()(N))}},309:function(e){e.exports=JSON.parse('{"lang":"zh-CN","data":{"design.editor.option":"选项","design.editor.autoSave":"自动保存","design.editor.handSave":"手动保存","design.editor.save":"保存","design.control.comp":"组件","design.control.node":"节点","design.control.prop":"属性","design.nav.file":"文件","design.nav.file.new":"新建","design.nav.file.save":"保存","design.nav.file.open":"打开","design.nav.file.saveAs":"另存为","design.nav.view":"视图","design.nav.view.highlightActive":"高亮选中区域","design.components.headerTitle":"组件列表","design.dom.headerTitle":"节点","design.canvas.headerTitle":"画布","design.console.error":"错误","design.console.terminal":"终端","design.console.style":"样式","design.console.script":"脚本","design.propType.string":"字符串","design.propType.number":"数值","design.propType.boolean":"布尔值","design.propType.style":"样式","design.propType.script":"脚本","design.propType.json":"JSON","design.propType.runtime":"运行时","design.propType.parentComp":"父组件","design.context.setting":"上下文设置","design.context.importResource":"导入资源","design.context.initScript":"初始化脚本","design.node.hooksScript":"Hooks脚本","design.nodeInfo":"节点信息","design.nodeInfo.id":"节点ID","design.nodeInfo.name":"节点名称","design.nodeInfo.compType":"组件类型","design.nodeInfo.pkgName":"组件类型","design.nodeInfo.compName":"组件名称","design.nodeInfo.compVersion":"组件版本","design.propertyPanel":"设置","design.propertyEdit":"属性编辑","design.propertyEdit.propSetting":"属性设置","design.propertyEdit.propName":"属性名称","design.propertyEdit.propDesc":"属性描述","design.propertyEdit.propType":"属性类型","design.styleSetting":"样式设置","design.styleSetting.flatMode":"平铺模式","design.generator":"生成器","design.dataCollect":"数据收集","design.dataCollect.sync":"同步","design.dataCollect.yes":"是","design.dataCollect.enableStatus":"启用状态","design.dataCollect.enableStatus.tips":"启用后才会进行数据收集和验证","design.dataCollect.groupName":"分组名称","design.dataCollect.groupName.placeholder":"请输入分组名称","design.dataCollect.fieldName":"字段名称","design.dataCollect.fieldName.placeholder":"请输入字段名称，默认为节点ID","design.dataCollect.containerWrapper":"容器包裹","design.dataCollect.containerWrapper.tips":"是否用对原始组件进行包裹，默认会对组件用div进行包裹，并添加异常提示元素","design.dataCollect.nameParse":"名称解析","design.dataCollect.nameParse.tips":"是否对如a.b.c等格式名称按层次结构生成数据结构","design.dataCollect.valueProp":"取值名称","design.dataCollect.valueProp.placeholder":"请输入值对应的属性名称，默认为value","design.dataCollect.changeProp":"事件名称","design.dataCollect.changeProp.placeholder":"请输入事件名称，默认为onChange","design.dataCollect.renderFunc":"渲染函数","design.dataCollect.renderFunc.tips":"/**\\n * 自定义函数渲染脚本\\n * @param name 对应字段名称\\n * @param element 原始组件元素\\n * @param errorInfo 错误信息，\\n    验证失败后为对应的规则消息名称\\n */\\n  module.exports = \\n  function(name,element,errorInfo){\\n    return element;\\n  }","design.dataCollect.moreOption":"更多选项","design.dataCollect.ruleSetting":"规则配置","design.dataCollect.ruleSetting.messagePlaceholder":"请输入提示信息","design.dataCollect.inputPlaceholder":"请输入","design.dataCollect.ruleSetting.required":"必选","design.dataCollect.ruleSetting.requiredValue":"必填","design.dataCollect.ruleSetting.max":"最多字符","design.dataCollect.ruleSetting.min":"最少字符","design.dataCollect.ruleSetting.regexp":"正则","design.dataCollect.ruleSetting.regexp.placeholder":"正则","design.dataCollect.ruleSetting.func":"函数"}}')},310:function(e){e.exports=JSON.parse('{"lang":"en","data":{"design.context.setting":"ContextSetting"}}')},796:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"Tree",(function(){return ae})),n.d(a,"Collapse",(function(){return oe})),n.d(a,"CssEditor",(function(){return de})),n.d(a,"JSONEditor",(function(){return fe})),n.d(a,"JSEditor",(function(){return ye})),n.d(a,"EditableText",(function(){return Oe})),n.d(a,"TextEditor",(function(){return se})),n.d(a,"LessEditor",(function(){return Ce})),n.d(a,"PositionPanel",(function(){return xe})),n.d(a,"HeaderPanel",(function(){return Le})),n.d(a,"AbsoluteHeaderPanel",(function(){return Ie}));var c={};n.r(c),n.d(c,"Engine",(function(){return He})),n.d(c,"Provider",(function(){return Ka})),n.d(c,"CanvasRender",(function(){return kt})),n.d(c,"useLayoutControl",(function(){return Aa})),n.d(c,"CanvasLayout",(function(){return Ba})),n.d(c,"RunningState",(function(){return At})),n.d(c,"useNodeShortCutOperation",(function(){return pt})),n.d(c,"Default",(function(){return qa}));var r=n(0),o=n.n(r),l=n(9),i=(n(38),n(117)),s=n(120),m=n(175),u=n.n(m),d=n(176),p=n.n(d),v=n(128),f=n.n(v),g={ComponentConfig:Object(l.findUniqueKey)("ComponentConfig"),ComponentNode:Object(l.findUniqueKey)("ComponentNode")},b=n(121),y=n(12);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){var t=function(e,t){if("object"!==u()(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==u()(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u()(t)?t:String(t)}var O=b.h.CNode,j=b.e.inject,N=b.o.createNode,C=b.o.getNodeElement,S=b.o.importComponentType,x=b.o.NodeProp;function k(e){return{drag:!1,accept:e.accept,drop:function(e,t,n,a){return a.optionType===g.ComponentConfig},onDrop:function(t,n){l.Observe.apply((function(){var a=n.data;if(!O.dispatch(e,b.c.Drop,{originEvent:t,config:a}).isPreventDefault){e.hoverStatus=null;var c=function(e,t,n){var a=N(t);return a.document=n.document||n,a.parent=n,S(a,t),a}(0,a,e);e.children?e.children.push(c):e.children=[c],O.dispatch(e,b.c.Dropped,{originEvent:t,config:a,node:c})}}))},onDropEnter:function(t,n){l.Observe.apply((function(){O.dispatch(e,b.c.Drop,{originEvent:t,config:n.data}).isPreventDefault||(e.hoverStatus={e:t,item:n.data})}))},onDropOver:function(t,n){l.Observe.apply((function(){if(!O.dispatch(e,b.c.Drop,{originEvent:t,config:n.data}).isPreventDefault){var a=e.hoverStatus;a?(a.e=t,a.item=n.data):e.hoverStatus={e:t,item:n.data}}}))},onDropLeave:function(t,n){l.Observe.apply((function(){O.dispatch(e,b.c.Drop,{originEvent:t,config:n.data}).isPreventDefault||(e.hoverStatus=null)}))}}}j({createDragDrop:function(e){var t=Object(l.component)((function(t){var n=t[x],a=t.className,c=f()(t,[x,"className"].map(h));c[x]=n;var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"".concat(a||"")},c);if(O.isShadowNode(n))return o.a.createElement(e,r);r.className="".concat(a||""," ").concat(n.hoverStatus?Object(i.c)("container-drop-over"):"");var m=o.a.createElement(e,r),u=Object(l.useMemo)((function(){return k(n)}),[n]);return o.a.createElement(s.DragDrop,{options:u},m)}));return t.displayName=Object(i.d)("DesignDragDrop"),t},createNodeBounds:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=C(t);if(a){var c=y.a.getPosition(e,a),r=Object(l.getValueOfObject)(n,"view.width"),o=Object(l.getValueOfObject)(n,"view.height");r=parseFloat(r)||0,o=parseFloat(o)||0;var i=y.a.getElementScale(a),s=i.x,m=i.y,u=a.scrollLeft||0,d=a.scrollTop||0,p={x:c.x/s+u,y:c.y/m+d,width:r,height:o};return p}}});var w=n(131),L=n.n(w),I=n(126),P=n.n(I),T=n(158),F=n.n(T),H=n(159),M=n.n(H),z=(n(60),n(61),n(62),Object(l.component)((function(e){e.expand;var t=e.className,n=f()(e,["expand","className"]),a=o.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M615.564215 406.570809"}),o.a.createElement("path",{d:"M885.03553 548.117592l-15.940041 0 0 243.09662c0 70.937632 15.940041 131.517359 15.940041 131.517359 0 17.530258-14.346753 31.882128-31.883151 31.882128L167.689698 954.6137c-17.532305 0-31.878035-14.351869-31.878035-31.882128 0 0 15.940041-58.190307 15.940041-128.32976L151.751704 548.117592l-15.940041 0c-17.537422 0-31.883151-14.349823-31.883151-31.888268L103.928512 356.824825c0-17.537422 14.34573-31.884175 31.883151-31.884175l270.995017 0L406.806681 149.58997c0-43.838438 35.867906-79.70532 79.707366-79.70532l47.822169 0c43.838438 0 79.704296 35.866882 79.704296 79.70532l0 175.349657 270.996041 0c17.537422 0 31.882128 14.346753 31.882128 31.884175l0 159.41064C916.917658 533.767769 902.572952 548.117592 885.03553 548.117592L885.03553 548.117592 885.03553 548.117592zM335.071893 922.726455 335.071893 711.508893c0-6.374174 5.583159-11.951193 11.95631-11.951193l7.966439 0c6.380314 0 11.961426 5.577019 11.961426 11.951193l0 211.217562 135.495974 0L502.452042 711.508893c0-6.374174 5.581112-11.951193 11.954263-11.951193l7.965415 0c6.385431 0 11.962449 5.577019 11.962449 11.951193l0 211.217562 127.526465 0L661.860634 711.508893c0-6.374174 5.577019-11.951193 11.951193-11.951193l7.972579 0c6.377244 0 11.955286 5.577019 11.955286 11.951193l0 211.217562 159.411663 0c0 0-15.939017-57.388035-15.939017-128.324644L837.212338 548.117592 183.633832 548.117592l0 246.284219c0 70.936609-15.945157 128.324644-15.945157 128.324644L335.071893 922.726455 335.071893 922.726455 335.071893 922.726455zM885.03553 372.761796c0-8.768711-7.17133-15.936971-15.940041-15.936971L582.156338 356.824825 582.156338 157.562549c0-31.085996-24.708751-55.793724-55.794747-55.793724l-31.878035 0c-31.084972 0-55.79884 24.707728-55.79884 55.793724l0 199.262276L151.750681 356.824825c-8.769734 0-15.940041 7.16826-15.940041 15.936971l0 127.528512c0 8.769734 7.170307 15.940041 15.940041 15.940041l31.883151 0 653.578506 0 31.882128 0c8.768711 0 15.940041-7.170307 15.940041-15.940041L885.034507 372.761796 885.03553 372.761796 885.03553 372.761796zM885.03553 372.761796"}),o.a.createElement("path",{d:"M885.03553 548.117592l-15.940041 0 0 243.09662c0 70.937632 15.940041 131.517359 15.940041 131.517359 0 17.530258-14.346753 31.882128-31.883151 31.882128L167.689698 954.6137c-17.532305 0-31.878035-14.351869-31.878035-31.882128 0 0 15.940041-58.190307 15.940041-128.32976L151.751704 548.117592l-15.940041 0c-17.537422 0-31.883151-14.349823-31.883151-31.888268L103.928512 356.824825c0-17.537422 14.34573-31.884175 31.883151-31.884175l270.995017 0L406.806681 149.58997c0-43.838438 35.867906-79.70532 79.707366-79.70532l47.822169 0c43.838438 0 79.704296 35.866882 79.704296 79.70532l0 175.349657 270.996041 0c17.537422 0 31.882128 14.346753 31.882128 31.884175l0 159.41064C916.917658 533.767769 902.572952 548.117592 885.03553 548.117592L885.03553 548.117592 885.03553 548.117592zM335.071893 912.493393 335.071893 711.508893c0-6.374174 5.583159-11.951193 11.95631-11.951193l7.966439 0c6.380314 0 11.961426 5.577019 11.961426 11.951193l0 200.984501 135.495974 0L502.452042 711.508893c0-6.374174 5.581112-11.951193 11.954263-11.951193l7.965415 0c6.385431 0 11.962449 5.577019 11.962449 11.951193l0 200.984501 127.526465 0L661.860634 711.508893c0-6.374174 5.577019-11.951193 11.951193-11.951193l7.972579 0c6.377244 0 11.955286 5.577019 11.955286 11.951193l0 200.984501 149.178601 0c0 0-15.939017-47.154973-15.939017-118.091582L826.979276 548.117592 193.866894 548.117592l0 246.284219c0 70.936609-15.945157 118.091582-15.945157 118.091582L335.071893 912.493393l0 10.233062L335.071893 912.493393zM874.802468 382.994857c0-8.768711-7.17133-15.936971-15.940041-15.936971L571.923276 367.057887 571.923276 157.562549c0-31.085996-24.708751-45.560662-55.794747-45.560662l-11.411911 0c-31.084972 0-55.79884 14.474666-55.79884 45.560662l0 209.495338L161.983743 367.057887c-8.769734 0-15.940041 7.16826-15.940041 15.936971l0 107.062388c0 8.769734 7.170307 15.940041 15.940041 15.940041l31.883151 0 633.112382 0 31.882128 0c8.768711 0 15.940041-7.170307 15.940041-15.940041L874.801445 382.994857l10.233062 0L874.802468 382.994857zM885.03553 372.761796"}));return o.a.createElement(G,P()({},n,{className:"".concat(Object(i.c)("comp-icon-clear")," ").concat(t||""),icon:a}))})));z.displayName=Object(i.d)("ClearIcon");var V=z,D=Object(l.component)((function(e){e.expand;var t=e.className,n=f()(e,["expand","className"]),a=o.a.createElement("svg",{viewBox:"0 0 1089 1024",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M1062.01504 124.471168 963.208019 25.664192C946.526317 8.982464 923.42857 0 900.330829 0 875.949875 0 854.135341 8.982464 837.453632 25.664192L788.691731 74.426048 788.691731 74.426048 271.558899 591.558912C270.275686 592.842112 268.99248 594.125312 268.99248 595.408512 268.99248 595.408512 268.99248 596.691712 267.709274 596.691712 266.426067 597.974912 266.426067 599.258176 265.142854 600.541376 265.142854 600.541376 265.142854 600.541376 265.142854 601.824576 265.142854 603.107776 265.142854 603.107776 263.859648 604.390976L193.283206 862.315776C190.716794 871.29824 193.283206 881.563904 199.699251 887.979968 204.832083 893.112768 211.248122 895.679168 218.947366 895.679168 221.513786 895.679168 224.080198 895.679168 225.363411 894.395968L484.57143 822.53632C485.854637 822.53632 485.854637 822.53632 487.137843 821.25312L488.42105 821.25312C489.704262 821.25312 490.987469 819.96992 492.270675 818.68672 492.270675 818.68672 493.553882 818.68672 493.553882 817.40352 494.837094 816.12032 496.120301 816.12032 497.403507 814.83712L1013.253133 298.987456 1062.01504 250.225536C1096.661651 216.862144 1096.661651 159.117824 1062.01504 124.471168L1062.01504 124.471168ZM317.754387 813.553856 274.125312 769.9248 303.639098 660.85216 426.827066 784.040128 317.754387 813.553856 317.754387 813.553856ZM328.020051 609.52384 806.65664 130.887232 819.488723 143.719296 863.117792 187.348352 384.481203 665.98496 328.020051 609.52384 328.020051 609.52384ZM478.155386 759.659136 421.694234 703.198016 900.330829 224.561408 956.791981 281.022528 478.155386 759.659136 478.155386 759.659136ZM1023.518797 214.295744 994.005011 243.809536 843.869677 93.674176 874.666669 62.877184C881.082707 56.461184 890.065165 52.61152 900.330829 52.61152 910.596493 52.61152 919.57895 56.461184 925.994989 62.877184L1024.802003 161.684224C1037.634086 177.082688 1037.634086 200.18048 1023.518797 214.295744L1023.518797 214.295744ZM949.09273 476.070144C934.977446 476.070144 922.145363 487.619072 922.145363 503.017536L922.145363 934.175424C922.145363 955.989952 904.180448 973.95488 882.365914 973.95488L153.503757 973.95488C131.689222 973.95488 113.724314 955.989952 113.724314 934.175424L113.724314 204.03008C113.724314 182.215552 131.689222 164.250624 153.503757 164.250624L584.661651 164.250624C598.776941 164.250624 611.609024 152.70176 611.609024 137.303232 611.609024 121.904768 600.060147 110.355904 584.661651 110.355904L153.503757 110.355904C102.175437 110.355904 61.112781 151.41856 61.112781 202.74688L61.112781 931.609024C61.112781 982.937344 102.175437 1024 153.503757 1024L882.365914 1024C933.694234 1024 974.75689 982.937344 974.75689 931.609024L974.75689 503.017536C976.040102 488.902272 964.491226 476.070144 949.09273 476.070144L949.09273 476.070144Z"}));return o.a.createElement(G,P()({icon:a},n,{className:"".concat(Object(i.c)("comp-icon-edit")," ").concat(t||"")}))}));D.displayName=Object(i.d)("ClearIcon");var A=D,R=(n(63),Object(l.component)((function(e){e.expand;var t=e.className,n=f()(e,["expand","className"]),a=o.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M554.666667 469.333333h-85.333334V682.666667h85.333334V469.333333z"}),o.a.createElement("path",{d:"M725.333333 213.333333v85.333334H853.333333v85.333333h-88.632889l-16.497777 428.316444a42.666667 42.666667 0 0 1-42.609778 41.016889H318.407111a42.666667 42.666667 0 0 1-42.666667-41.016889l-16.497777-428.316444H170.666667v-85.333333h128v-85.333334A42.666667 42.666667 0 0 1 341.333333 170.666667h341.333334a42.666667 42.666667 0 0 1 42.666666 42.666666z m-341.333333 85.333334V256h256v42.666667h-256z m-39.310222 85.333333h334.620444l-14.791111 384H359.480889l-14.791111-384z"}));return o.a.createElement(G,P()({icon:a},n,{className:"".concat(Object(i.c)("comp-icon-emclear")," ").concat(t||"")}))})));R.displayName=Object(i.d)("EmClearIcon");var B=R,K=Object(l.component)((function(e){e.expand;var t=e.className,n=f()(e,["expand","className"]),a=o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M968 498.4c13.6 296-259.2 532-564.8 454.4C248 913.6 126.4 792 87.2 637.6 8.8 332 245.6 59.2 540.8 72c231.2 11.2 416 196 427.2 426.4zM136 520c0 212 172.8 384 384.8 384 210.4-0.8 381.6-172 382.4-381.6 0.8-212-171.2-385.6-383.2-385.6C308.8 136 136 308 136 520z"}),o.a.createElement("path",{d:"M768 544H256v-64h512z"}));return o.a.createElement(G,P()({icon:a},n,{className:"".concat(Object(i.c)("comp-icon-rm")," ").concat(t||"")}))}));K.displayName=Object(i.d)("RemoveIcon");var Z=K,q=Object(l.component)((function(e){e.expand;var t=e.className,n=f()(e,["expand","className"]),a=o.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M540.444444 227.555556h85.333334v113.777777h-85.333334V227.555556zM199.111111 824.888889V199.111111h56.888889v199.111111c0 28.444444 22.072889 56.888889 56.888889 56.888889h398.222222c33.564444 0 56.888889-28.444444 56.888889-56.888889V199.111111h56.888889v625.777778H199.111111zM682.666667 199.111111v170.666667H341.333333V199.111111h341.333334zM170.666667 113.777778C136.021333 113.777778 113.777778 142.222222 113.777778 170.666667v682.666666c0 28.444444 22.016 56.888889 56.888889 56.888889h682.666666c34.247111 0 56.888889-28.444444 56.888889-56.888889V170.666667c0-28.444444-23.04-56.888889-56.888889-56.888889H170.666667z"}));return o.a.createElement(G,P()({icon:a},n,{className:"".concat(Object(i.c)("comp-icon-save")," ").concat(t||"")}))}));q.displayName=Object(i.d)("SaveIcon");var J=q,G=Object(l.component)((function(e){e.expand;var t=e.className,n=e.icon,a=f()(e,["expand","className","icon"]);return o.a.createElement("div",P()({},a,{className:"".concat(Object(i.c)("comp-icon")," ").concat(t||"")}),o.a.createElement(l.MemoComponent,{dep:[]},(function(){return n})))}));G.displayName=Object(i.d)("Icon");var U=Object(l.component)((function(e){var t=e.expand,n=e.className,a=f()(e,["expand","className"]),c=o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1"},o.a.createElement("path",{d:"M917.333333 364.8L851.2 298.666667 512 637.866667 172.8 298.666667 106.666667 364.8 512 768z"}));return o.a.createElement(G,P()({},a,{icon:c,className:"".concat(Object(i.c)("comp-icon-triangle")," ").concat(t?Object(i.c)("comp-icon-triangle-revert"):""," ").concat(n||"")}))}));U.displayName=Object(i.d)("ExpandIcon");var W=U,_=function(e){return e.caption||e.name},X=function(e){return!(!e||!e.children)},Y=Object(l.findUniqueKey)("loadKey");function Q(){}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=F()(M.a.mark((function e(t,n){var a,c,r,o,i,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.load,c=void 0===a?n:a,!t.children&&c){e.next=3;break}return e.abrupt("return");case 3:return(r=t[Y])||(r=t[Y]="function"==typeof c?c(t,c):(n||Q)(t,c)),t.loading=!0,e.next=8,Object(l.asyncWrapper)(r);case 8:o=e.sent,i=L()(o,1),s=i[0],t.children=Object(l.isArray)(s)?s:[],t.loading=!1;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=Object(l.component)((function(e){var t=e.node,n=e.level,a=void 0===n?0:n,c=e.tabSize,r=void 0===c?20:c,l=e.defaultLoadNode,m=e.index,u=e.parent,d=e.lineHeight,p=void 0===d?26:d,v=e.paddingLeft,f=void 0===v?6:v,g=e.renderLoading,b=e.showLoading,y=void 0===b||b,E=t.children,h=e.isDirectory||X,O=h(t),j=t.expand,N=a*r+f,C=e.renderNode||_,S="".concat(p,"px");return o.a.createElement("div",{className:Object(i.c)("comp-tree","node")},o.a.createElement("div",{className:"".concat(Object(i.c)("comp-tree","node-content")," ").concat(t.select?Object(i.c)("comp-tree","node-select"):""),style:{paddingLeft:N,lineHeight:S,height:p}},o.a.createElement("div",{style:{lineHeight:S}},O?o.a.createElement(W,{expand:j,onClick:function(){t.expand=!j,t.expand&&$(t,l)}}):null,a?o.a.createElement("span",{style:{width:O?r-6:r+10}}):null),o.a.createElement("div",null,C(t,{level:a}))),function(){var e;if(0===a)return null;var t={marginLeft:(a-1)*r+f};return(null==u||null===(e=u.children)||void 0===e?void 0:e.length)-1===m&&(t.bottom="",t.height=p/2),o.a.createElement("div",{className:Object(i.c)("comp-tree","ver-line"),style:t})}(),y&&t.loading?"function"==typeof g?g():o.a.createElement(s.Loading,{title:"加载中...",iconSize:50,overlayStyle:{backgroundColor:"rgba(0,0,0,0.2)"},style:{height:120},spinning:!0}):j&&O?o.a.createElement("div",{className:Object(i.c)("comp-tree","children")},E&&E.map((function(e,n){return o.a.createElement(te,{key:n,parent:t,index:n,node:e,level:a+1,renderNode:C,isDirectory:h,lineHeight:p,tabSize:r,defaultLoadNode:l,paddingLeft:f,renderLoading:g,showLoading:y})}))):null)}));te.displayName=Object(i.d)("TreeNode");var ne=Object(l.component)((function(e){var t=e.className,n=e.node,a=e.renderNode,c=e.isDirectory,r=e.defaultLoadNode,l=f()(e,["className","node","renderNode","isDirectory","defaultLoadNode"]);return o.a.createElement("div",{className:"".concat(Object(i.c)("comp-tree")," ").concat(t||"")},o.a.createElement("div",{className:Object(i.c)("comp-tree","children")},n?[].concat(n).map((function(e,t){return o.a.createElement(te,P()({key:t,node:e,renderNode:a,isDirectory:c,defaultLoadNode:r},l))})):null))}));ne.displayName=Object(i.d)("Tree"),ne.loadChildren=$;var ae=ne;n(64);function ce(e,t){if(!e)return!0;var n=t.key;return-1===e.indexOf(n)}var re=Object(l.component)((function(e){var t=e.children,n=e.defaultActiveKey,a=e.className,c=e.style,r=[];return Object(l.isArray)(t)||o.a.isValidElement(t)?[].concat(t).forEach((function(e){if(e){var t=o.a.cloneElement(e,{collapse:ce(n,e)});r.push(t)}})):r=null,o.a.createElement("div",{className:"".concat(Object(i.c)("g-collapse")," ").concat(a||""),style:c},r)}));re.displayName=Object(i.d)("Collapse");var oe=re,le=Object(l.component)((function(e){var t=e.header,n=e.collapse,a=e.children,c=e.className,r=e.style,s=Object(l.useState)(n),m=L()(s,2),u=m[0],d=m[1];return Object(l.useLayoutEffect)((function(){n!==u&&d(n)}),[n]),o.a.createElement("div",{className:"".concat(Object(i.c)("g-collapse-panel")," ").concat(u?Object(i.c)("g-collapse-panel-collapse"):""," ").concat(c||""),style:r},o.a.createElement("header",{className:Object(i.c)("g-collapse-panel-header"),onClick:function(){d(!u)}},o.a.createElement(W,{expand:!u}),t),u?null:o.a.createElement("div",{className:Object(i.c)("g-collapse-panel-content")},a))}));le.displayName=Object(i.d)("Collapse.Panel"),re.Panel=le;n(65);var ie=Object(l.component)((function(e){var t=e.className,a=e.style,c=e.preLoad,r=Object(l.useState)(),m=L()(r,2)[1],u=Object(l.useMemo)((function(){return{EditorComp:null}}),[]);Object(l.useLayoutEffect)(F()(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(3),n.e(13)]).then(n.bind(null,791));case 2:if(t=e.sent,"function"!=typeof c){e.next=6;break}return e.next=6,c();case 6:u.EditorComp=t.default,m(1);case 8:case"end":return e.stop()}}),e)}))),[]);var d=u.EditorComp,p=d?o.a.createElement(d,e):o.a.createElement(s.Loading,{title:"加载中...",iconSize:50,overlayStyle:{backgroundColor:"rgba(0,0,0,0.2)"},spinning:!0});return o.a.createElement("div",{className:"".concat(Object(i.c)("text-editor")," ").concat(t||""),style:a},p)}));ie.displayName=Object(i.d)("TextEditor");var se=ie;function me(){return Promise.all([n.e(6).then(n.t.bind(null,790,7))])}var ue=Object(l.component)((function(e){e.beforeInit;var t=e.className,n=e.value,a=f()(e,["beforeInit","className","value"]),c=Object(l.useMemo)((function(){return{mode:"css"}}));if("string"!=typeof n)try{n=Object.keys(n).map((function(e){return"".concat(e,":").concat(n[e])})).join(";\n")}catch(e){n=""}return o.a.createElement(se,P()({value:n},a,{options:c,className:"".concat(Object(i.c)("css-editor")," ").concat(t||""),preLoad:me}))}));ue.displayName=Object(i.d)("CssEditor");var de=ue;function pe(){return Promise.all([n.e(8).then(n.t.bind(null,792,7))])}var ve=Object(l.component)((function(e){e.beforeInit;var t=e.className,n=f()(e,["beforeInit","className"]),a=Object(l.useMemo)((function(){return{mode:"json"}}));return o.a.createElement(se,P()({},n,{options:a,className:"".concat(Object(i.c)("json-editor")," ").concat(t||""),preLoad:pe}))}));ve.displayName=Object(i.d)("JSONEditor");var fe=ve;function ge(){return Promise.all([n.e(7).then(n.t.bind(null,793,7)),n.e(9).then(n.t.bind(null,794,7))])}var be=Object(l.component)((function(e){e.beforeInit;var t=e.className,n=f()(e,["beforeInit","className"]),a=Object(l.useMemo)((function(){return{mode:"jsx"}}));return o.a.createElement(se,P()({},n,{options:a,className:"".concat(Object(i.c)("js-editor")," ").concat(t||""),preLoad:ge}))}));be.displayName=Object(i.d)("JSEditor");var ye=be;n(66);function Ee(e){return"string"==typeof e?e:"number"!=typeof e||Number.isNaN(e)?"":String(e)}var he=Object(l.component)((function(e){var t=e.className,n=e.style,a=e.onChange,c=e.onModeChange,r=e.type,s=Object(l.useState)(!1),m=L()(s,2),u=m[0],d=m[1],p=Object(l.useState)(Ee(e.text)),v=L()(p,2),f=v[0],g=v[1],b=Object(l.useState)(""),y=L()(b,2),E=y[0],h=y[1],O=Object(l.useRef)();Object(l.useLayoutEffect)((function(){Ee(e.content)!==f&&g(e.text)}),[e.text]),Object(l.useLayoutEffect)((function(){O.current&&Object(l.safeApply)((function(){O.current.focus()}))}),[u]);var j=Object(l.useCallback)((function(e){Object(l.safeApply)(c,[e])}),[c]),N="".concat(Object(i.c)("comp-editable-text")," ").concat(t||"");return u?o.a.createElement("input",{ref:O,style:n,className:"".concat(N," ").concat(Object(i.c)("comp-editable-text-input")),value:E,onChange:function(e){var t=e.target.value;h(t,!1)},onBlur:function(){d(u=!1),g(f=E||f),h(""),Object(l.safeApply)(a,["number"===r?+f||0:f]),j(u)}}):o.a.createElement("div",{style:n,className:"".concat(N," ").concat(Object(i.c)("comp-editable-text-content"))},o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement("span",{className:Object(i.c)("text-content"),title:f},f),o.a.createElement(A,{className:Object(i.c)("editable-icon"),onClick:function(){d(u=!0),h(f),j(u)}}))))}));he.displayName=Object(i.d)("EditableText");var Oe=he;function je(){return Promise.all([n.e(10).then(n.t.bind(null,795,7))])}var Ne=Object(l.component)((function(e){e.beforeInit;var t=e.className,n=f()(e,["beforeInit","className"]),a=Object(l.useMemo)((function(){return{mode:"less"}}));return o.a.createElement(se,P()({},n,{options:a,className:"".concat(Object(i.c)("less-editor")," ").concat(t||""),preLoad:je}))}));Ne.displayName=Object(i.d)("LessEditor");var Ce=Ne,Se=(n(67),Object(l.component)((function(e){var t=e.bounds,n={x:0,y:0,width:0,height:0};return t&&Object.assign(n,t),o.a.createElement("div",{className:Object(i.c)("node-position-panel")},o.a.createElement("div",{className:Object(i.c)("node-position-row")},o.a.createElement("div",null,o.a.createElement("div",null,"坐标-X"),o.a.createElement("div",{className:Object(i.c)("position-text-wrapper")},o.a.createElement(Oe,{type:"number",text:n.x,onChange:function(e){t.x=e}}))),o.a.createElement("div",null,o.a.createElement("div",null,"坐标-Y"),o.a.createElement("div",{className:Object(i.c)("position-text-wrapper")},o.a.createElement(Oe,{type:"number",text:n.y,onChange:function(e){t.y=e}})))),o.a.createElement("div",{className:Object(i.c)("node-position-row")},o.a.createElement("div",null,o.a.createElement("div",null,"宽度"),o.a.createElement("div",{className:Object(i.c)("position-text-wrapper")},o.a.createElement(Oe,{type:"number",text:n.width,onChange:function(e){t.width=e}}))),o.a.createElement("div",null,o.a.createElement("div",null,"高度"),o.a.createElement("div",{className:Object(i.c)("position-text-wrapper")},o.a.createElement(Oe,{type:"number",text:n.height,onChange:function(e){t.height=e}})))))})));Se.displayName=Object(i.d)("PositionPanel");var xe=Se,ke=(n(68),Object(i.c)("header-panel-title")),we=Object(l.component)((function(e){var t=e.title,n=e.children,a=e.className,c=e.titleClassName,r=e.style;return o.a.createElement("div",{className:"".concat(Object(i.c)("header-panel")," ").concat(a||""),style:r},o.a.createElement("header",{className:"".concat(ke," ").concat(c||"")},o.a.createElement("div",null,t)),o.a.createElement("div",{className:Object(i.c)("header-panel-content")},n))})),Le=we;we.displayName=Object(i.d)("HeaderPanel");var Ie=function(e){var t=e.className,n=f()(e,["className"]);return o.a.createElement(s.Modal,P()({className:"".concat(Object(i.c)("modal")," ").concat(t||"")},n))};Ie.displayName=Object(i.d)("AbsoluteHeaderPanel"),b.e.inject({components:a});var Pe=b.n.throttleStorageNode,Te=b.n.parseNodeFrom,Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0;return{get:function(){return Te(e,t)},set:function(t){Pe(t,e)}}},He={create:function(e){var t=e.datasource,n=void 0===t?Fe():t,a=n.get(),c=Object(l.Observe)({rootNode:a,viewSetting:{highlightActiveNode:!0,previewMode:!1,fullscreen:!1,zoomState:{scale:1,tx:0,ty:0}}},{autoApply:!0,autoApplyThrottle:!1}),r=c.data();return c.on("change",(function(){var e;null===(e=n.set)||void 0===e||e.call(n,r.rootNode)})),r},createDatasourceById:Fe},Me=n(20),ze=n.n(Me),Ve=(n(69),n(798)),De=(n(70),function(e){var t=e.className,n=f()(e,["className"]);return o.a.createElement(Ve.a,P()({className:"".concat(Object(i.c)("input")," ").concat(t||"")},n))}),Ae=(n(71),Object(l.component)((function(e){var t=e.className,n=e.onChange,a=e.groupValue,c=e.value,r=e.children,l=e.style,s=e.multi,m=a?a.indexOf(c)>=0:!!c;return o.a.createElement("div",{className:"".concat(Object(i.d)("comp-item")," ").concat(s?Object(i.d)("comp-item-m"):""," ").concat(m?Object(i.d)("item-active"):""," ").concat(t||""),style:l,onClick:function(){n(c)}},o.a.createElement("div",{className:Object(i.d)("item-icon")}),o.a.createElement("div",{className:Object(i.d)("item-body")},r))})));Ae.displayName=Object(i.d)("Item");var Re=Object(l.component)((function(e){var t=e.className,n=e.children,a=e.value,c=e.onChange,r=e.style,s=e.multi,m=void 0!==s&&s,u=e.disabled,d=Object(l.useState)([].concat(a)),p=L()(d,2),v=p[0],f=p[1],g=Object(l.useMemo)((function(){return{onChange:null,value:null}}),[]);g.onChange=c,g.value=v;var b=Object(l.useCallback)((function(e,t){Object(l.isArray)(e)||(e=[e]),!t&&Object(l.sameDep)(g.value,e)||(f(e),g.onChange&&g.onChange(m?[].concat(e):e[0]))}),[]);Object(l.useLayoutEffect)((function(){a!==v&&b(a)}),[a]);var y=Object(l.useCallback)((function(e){if(m){var t=[].concat(g.value);t.indexOf(e)>=0?t.splice(1,0):t.push(e),b(t,!0)}else b([e])}),[m]);return o.a.createElement("div",{className:"".concat(Object(i.d)("comp-item-group")," ").concat(t||""),style:r,"data-disabled":u},n?o.a.isValidElement(n)?o.a.cloneElement(n,{onChange:y,groupValue:v}):Object(l.isArray)(n)?n.map((function(e){return o.a.isValidElement(e)?o.a.cloneElement(e,{onChange:y,groupValue:v}):null})):void 0:n)}));Re.displayName=Object(i.d)("item-group"),Ae.Group=Re;var Be=Object(l.component)((function(e){return o.a.createElement(Ae,P()({},e,{multi:!0}))}));Be.displayName=Object(i.d)("Checkbox");var Ke=Ae,Ze=(n(72),Object(l.component)((function(e){var t=e.className,n=e.items,a=e.onChange;return n=n||[],o.a.createElement("div",{className:"".concat(Object(i.c)("h-layout-control")," ").concat(t||"")},n.map((function(e,t){return o.a.createElement("div",{key:t,className:"".concat(Object(i.c)("layout-control-item")," ").concat(e.hidden?Object(i.c)("layout-control-item-hidden"):""),onClick:function(){e.hidden=!e.hidden,"function"==typeof a&&a(e)}},o.a.createElement("div",null,e.caption))})))})));Ze.displayName=Object(i.d)("VLayoutControl");n(73),Object(l.component)((function(e){var t=e.path,n=Object(l.useMemo)((function(){return t?t.replace(/^\/+/,"").split("/"):[]}),[t]);return o.a.createElement("nav",{className:Object(i.c)("nav-header")},o.a.createElement("ul",{className:Object(i.c)("nav-header-paths")},n.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("a",null,e),t!==n.length-1?o.a.createElement("span",{className:Object(i.c)("nav-header-path-split")},">"):null)}))))}));var qe=n(797),Je=(n(74),function(e){var t=e.className,n=e.popupClassName,a=f()(e,["className","popupClassName"]);return o.a.createElement(qe.a,P()({className:"".concat(Object(i.c)("select")," ").concat(t||""),popupClassName:"".concat(Object(i.c)("select-popover")," ").concat(n||"")},a))});Je.Option=qe.a.Option,Je.OptGroup=qe.a.OptGroup;var Ge=Je,Ue=n(800),We=(n(75),function(e){var t=e.overlayClassName,n=f()(e,["overlayClassName"]);return o.a.createElement(Ue.a,P()({overlayClassName:"".concat(Object(i.c)("popover")," ").concat(t||"")},n))}),_e=n(782),Xe=(n(76),function(e){var t=e.overlayClassName,n=f()(e,["overlayClassName"]);return o.a.createElement(_e.a,P()({overlayClassName:"".concat(Object(i.c)("tooltip")," ").concat(t||"")},n))}),Ye=(n(77),b.l.animateFrameSetTimeout),Qe=b.l.animateFrameClearTimeout,$e=Ye,et=Qe,tt=b.o.componentNode,nt=b.o.getNodeElement;var at=Object(l.component)((function(e){var t=e.designEngine,n=t.rootNode,a=Object(l.useState)(),c=L()(a,2)[1],r=Object(l.useRef)(),s=Object(l.useMemo)((function(){return{timeout:0,nodeBounds:null}}),[]),m=Object(l.useCallback)((function(e){s.nodeBounds=e,c(e)}),[c]),u=Object(l.useCallback)((function(){var e,n,a=t.rootNode,c=t.viewSetting,o=function(e,t){var n=nt(e);if(n&&t){var a=n.parentNode;a&&tt(a)===e&&(n=a);var c=y.a.select(n).bounds(),r=c.x,o=c.y,l=r+c.width,i=o+c.height,s=y.a.select(t).bounds(),m=l-r,u=i-o;return{left:r-=s.x,top:o-=s.y,width:m,height:u}}}(a.activeNode,r.current);if(o){var l=c.zoomState.scale;c.fullscreen&&(l=1),o=Object.assign({},{left:o.left/l,top:o.top/l,width:o.width/l,height:o.height/l})}e=s.nodeBounds,n=o,e&&n&&!["left","top","width","height"].some((function(t){return Math.round(e[t])!==Math.round(n[t])}))||m(o)}),[]),d=Object(l.useCallback)((function(){s.timeout||(s.timeout=$e((function(){s.timeout=null,u(),d()}),1e3))}),[]),p=Object(l.useCallback)((function(){et(s.timeout),s.timeout=null}),[]);Object(l.useEffect)((function(){var e=function(){"visible"===document.visibilityState?d():p()};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[]),Object(l.useEffect)((function(){u()}),[n.activeNode]),Object(l.useEffect)((function(){n.activeNode&&n.activeNode.unmount&&n.active()}),[n.activeNode&&n.activeNode.unmount]),Object(l.useEffect)((function(){return d(),function(){p()}}),[]);var v=t.viewSetting.highlightActiveNode;return Object(l.useEffect)((function(){v?d():p()}),[v]),!!v&&o.a.createElement("div",{ref:r,className:Object(i.c)("document-active-state")},s.nodeBounds?o.a.createElement("div",{style:s.nodeBounds,className:Object(i.c)("document-active-state-area")},o.a.createElement("i",null),o.a.createElement("i",null),o.a.createElement("i",null),o.a.createElement("i",null)):null)}));at.displayName=Object(i.d)("ActiveComponent");var ct=at,rt=n(803),ot=n(804),lt=b.f.parseKeyString,it=b.f.matchKey,st=b.n.deSerialize,mt=b.n.serializeObject,ut=Object(l.findUniqueKey)("tabIndex");function dt(){var e=Object(l.useComponent)();Object(l.useEffect)((function(){var t=ze.a.findDOMNode(e);if(t)return t[ut]=!0,t.setAttribute("tabIndex","-1"),function(){delete t[ut]}}),[])}var pt=function(e){var t=Object(l.useComponent)();Object(l.useEffect)((function(){var n=new y.c({passive:!1}),a=lt("Ctrl+C|Meta+C"),c=lt("Ctrl+V|Meta+V"),r=null;return n.register("keydown:copy",(function(e){if(a.some((function(t){return it(e,t)}))){var t=document.activeElement;if(t)return t[ut]?t:void 0}})),n.register("keydown:past",(function(e){if(c.some((function(t){return it(e,t)}))){var t=document.activeElement;if(t)return t[ut]?t:void 0}})),n.on("copy",(function(t){var n=e.rootNode.activeNode;n&&n.parent&&(r=mt(n),t.preventDefault())})),n.on("past",(function(t){var n=e.rootNode,a=n.activeNode;if(a&&r){t.preventDefault();var c=JSON.parse(JSON.stringify(r));(c=st(c,n)).document=n,c.parent=a,a.children?a.children.push(c):a.children=[c]}})),n.mount(ze.a.findDOMNode(t)),function(){n.unmount()}}),[e])},vt=250,ft=400,gt=20,bt=20,yt=n(257),Et=n(309),ht=n(310),Ot=new yt.a;function jt(e){var t=e,n=t.lid,a=t.default,c=e.children;return Ot.get({lid:n,default:c||a})}Ot.lang(yt.b.get(["en","zh-CN"],"en")),Ot.use(Et),function(e){e.use(ht)}(Ot);var Nt=1,Ct=Object(i.c)("canvas-render-title"),St=Object(l.component)((function(e){return dt(),o.a.createElement(b.j,e)}));St.displayName=Object(i.d)("RenderForDesign");var xt=Object(l.component)((function(e){var t=e.designEngine,n=t.viewSetting,a=t.rootNode,c=Object(l.useState)(),r=L()(c,2),s=r[0],m=r[1],u=Object(l.useComponent)();Object(l.useEffect)((function(){var e=ze.a.findDOMNode(u);if(e){var t=e.parentNode.getBoundingClientRect(),n=gt,a=bt,c=t.width-2*n,r=t.height-2*a;m({x:n,y:a,width:c,height:r})}}),[]);var d=o.a.createElement("div",{className:Ct},o.a.createElement(jt,{lid:"design.canvas.headerTitle"},"画布"),o.a.createElement("div",{className:Object(i.c)("icon-wrapper")},n.fullscreen?o.a.createElement(rt.a,{onClick:function(){n.fullscreen=!1}}):o.a.createElement(ot.a,{onClick:function(){n.fullscreen=!0}})));return s?o.a.createElement(Ie,{dragEnabled:!n.fullscreen,resizeEnabled:!n.fullscreen,title:d,bound:s,resizePlaceholder:!0,minWidth:300,minHeight:200,className:"".concat(Object(i.c)("canvas-render")," ").concat(n.fullscreen?Object(i.c)("canvas-render-fullscreen"):"")},o.a.createElement(ct,{designEngine:t}),o.a.createElement(l.MemoComponent,{dep:[a]},(function(){return o.a.createElement(St,{key:"".concat(Nt++),rootNode:a})}))):o.a.createElement("div",null)}));xt.displayName=Object(i.d)("CanvasRender");var kt=xt,wt=(n(78),Object(l.component)((function(e){var t=e.designEngine,n=e.children,a=e.ignoreElements,c=t.viewSetting,r=Object(i.c)("zoom-layer"),m=Object(l.useRef)(),u=Object(l.useMemo)((function(){return{ignoreElements:[]}}),[]);u.ignoreElements=a;var d=Object(l.useState)(),p=L()(d,2),v=p[0],f=p[1];Object(l.useLayoutEffect)((function(){f(m.current)}),[]);var g=Object(l.useCallback)((function(e){y.a.findUpUtil(e.native.target,(function(e){if(s.Node.getData(e))return!!e;var t=u.ignoreElements;if(t&&0!==t.length){var n=e.className;if(n)return n.split(/\s+/).some((function(e){return t.includes(e)}))}}),(function(e){return e===m.current}))&&(e.cancel=!0)}),[]),b=Object(l.useCallback)((function(e){s.Resize.isResizing()&&(e.cancel=!0)}),[]),E=Object(s.useZoom)(c.zoomState,{maxZoom:1.5,minZoom:.2,canvasElement:".".concat(r),zoomElement:".".concat(r,">div"),onZoomDragStart:g,onZoomDragMove:b,onZoomScaleStart:g,proxyElement:v}),h=E.zoomState,O=E.getStyle;return Object(l.useEffect)((function(){Object.assign(c.zoomState,h)}),[h]),o.a.createElement("div",{className:Object(i.c)("zoom-layer-wrapper"),ref:m},o.a.createElement("div",{className:r},o.a.createElement("div",{style:O()},n)))})));wt.displayName=Object(i.d)("ZoomLayer");var Lt=wt,It=(n(79),n(80),[{name:"script",consoleKey:"js",caption:jt({lid:"design.console.script",default:"脚本"})},{name:"style",caption:jt({lid:"design.console.style",default:"样式"})}]);var Pt=Object(l.component)((function(e){var t=e.rootNode.console,n=Object(l.useState)(function(e){var t=0;return It.some((function(n,a){var c=e[n.name].errors;if(c&&c.length>0)return t=a,!0})),It[t]}(t)),a=L()(n,2),c=a[0],r=a[1];return o.a.createElement(s.FlexStack.V,{className:Object(i.c)("running-state-error")},o.a.createElement(s.FlexStackItem.V,{height:24,vAlign:"center",className:Object(i.c)("running-state-tabs")},o.a.createElement("div",{className:Object(i.c)("running-state-tab-label")},o.a.createElement(jt,{lid:"design.console.error"},"错误"),"->"),It.map((function(e){return o.a.createElement("div",{key:e.name,className:"".concat(Object(i.c)("running-state-tab")," ").concat(c===e?Object(i.c)("running-state-tab-active"):""),onClick:function(){r(e)}},o.a.createElement("div",null,e.caption))}))),o.a.createElement(s.FlexStackItem.V,{className:Object(i.c)("running-state-body")},c?t[c.name].errors.map((function(e){return o.a.createElement("pre",{key:e.id},e.data.message)})):null))}));Pt.displayName=Object(i.d)("RunningStateError");var Tt=Pt,Ft=(n(81),Object(l.component)((function(e){var t=Object(l.useState)([{index:1}]),n=L()(t,1)[0],a=Object(l.useState)(n[0]),c=L()(a,2),r=c[0],m=c[1];return o.a.createElement(s.FlexStack.V,{className:Object(i.c)("running-state-terminal")},o.a.createElement(s.FlexStackItem.V,{height:24,vAlign:"center",className:Object(i.c)("running-state-tabs")},o.a.createElement("div",{className:Object(i.c)("running-state-tab-label")},o.a.createElement(jt,{lid:"design.console.terminal"},"终端"),"->"),n.map((function(e){return o.a.createElement("div",{key:e.index,className:"".concat(Object(i.c)("running-state-tab")," ").concat(r===e?Object(i.c)("running-state-tab-active"):""),onClick:function(){m(e)}},o.a.createElement("div",null,o.a.createElement(jt,{lid:"design.console.terminal"},"终端"),"(",e.index,")"))}))),o.a.createElement(s.FlexStackItem.V,{className:Object(i.c)("running-state-body")}))})));Ft.displayName=Object(i.d)("RunningStateTerminal");var Ht=Ft,Mt={syncElementResize:!1,overlay:!1,modes:["Top"],index:300,onResize:function(e,t){var n=t.ty,a=t.originHeight-n;e.resizeElement.style.height="".concat(a,"px")}},zt=[{name:"error",active:function(e){return Vt(e)>0},caption:function(e){return o.a.createElement("span",null,o.a.createElement(jt,{lid:"design.console.error"},"错误"),e>0?o.a.createElement("i",null,"(",e,")"):null)},comp:Tt},{name:"terminal",caption:jt({lid:"design.console.terminal",default:"终端"}),comp:Ht,active:function(){return!1}}];function Vt(e){return["script","style"].reduce((function(t,n){return t+e.console[n].errors.length}),0)}var Dt=Object(l.component)((function(e){var t=e.designEngine.rootNode,n=Object(l.useState)(),a=L()(n,2),c=a[0],r=a[1],m=Object(l.useCallback)((function(e){var n=e.comp;return o.a.createElement(n,{rootNode:t})}),[]),u=Object(l.useCallback)((function(){var e=t.console;l.Observe.apply((function(){["script","style"].forEach((function(t){var n=e[t];n&&n.errors&&(n.errors=[])}))}))}),[t]);return o.a.createElement(s.FlexStack.V,{className:Object(i.c)("running-state")},c?o.a.createElement(s.Resize,{key:"activeStateType",options:Mt},o.a.createElement(s.FlexStackItem.V,{height:"auto",flowMode:"vertical"},m(c))):null,o.a.createElement(s.FlexStackItem.V,{key:"stateTypes",height:24,vAlign:"center"},zt.map((function(e){return o.a.createElement("div",{key:e.name,className:"".concat(Object(i.c)("running-state-type")," ").concat(e===c?Object(i.c)("running-state-type-active"):""),onClick:function(){r(c===e?null:e)}},o.a.createElement("div",{className:"".concat(e.active(t)?Object(i.c)("state-type-active"):"")},"function"==typeof(n=e.caption)?n(Vt(t)):n));var n})),o.a.createElement("div",{className:Object(i.c)("btn-wrapper")},o.a.createElement(B,{className:Object(i.c)("icon-btn"),onClick:u}))))}));Dt.displayName=Object(i.d)("RunningState");var At=Dt;function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(82);function Kt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=F()(M.a.mark((function e(t){var n,a,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.meta){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,b.a.loadMeta(n.namespace,n.version);case 5:return a=e.sent,c=a.modules||[],e.abrupt("return",c.map((function(e){var n=e.propTypes||[],c=e.caption;return"object"===u()(c)&&(c=c.name),c=c||e.name,{path:"".concat(t.path,"/").concat(e.name),name:e.name,caption:"".concat(e.name," (").concat(c,")"),component:{type:{namespace:a.namespace,version:a.version,module:e.name},propTypes:n}}})).sort((function(e,t){var n=String(e.name),a=String(t.name);return n.charCodeAt(0)-a.charCodeAt(0)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t){return o.a.createElement("div",{className:Object(i.c)("i-store","drag-node")},t.data.caption||t.data.name)}function Jt(e){if(!e.component)return e.caption||e.name;var t={drop:!1,type:e.dragType,outAnimate:!0,data:e,dragNode:qt,optionType:g.ComponentConfig};return o.a.createElement(s.DragDrop,{options:t},o.a.createElement("span",{className:Object(i.c)("menu-item")},e.caption||e.name))}function Gt(e){return!(!e.children&&!e.meta)}var Ut=Object(l.component)((function(e){var t=e.config,n=Object(l.useMemo)((function(){return Object(l.Observe)((e=t.items,n={},a={name:"/",children:[]},e.forEach((function(e){var t=e.path;e.path=function(e){return e&&!/^\//.test(e)&&(e="/"+e),e}(t);var c=[];t.replace(/([^\/]+)/g,(function(e,t){return c.push(t),e}));var r=a;c.forEach((function(t,a){var o=c.slice(0,a+1).join("/"),l=n[o];if(!l){l=n[o]={path:o,name:t};var i=r.children;i||(i=r.children=[]),i.push(l)}if(a===c.length-1){e.children;var s=f()(e,["children"]);Object.assign(l,s),l.component&&Object.defineProperty(l,"component",{value:Bt({},l.component),configurable:!0})}r=l}))})),a.children),{autoApply:!0}).data();var e,n,a}),[t]);return o.a.createElement(ae,{className:Object(i.c)("register-components"),node:n,isDirectory:Gt,renderNode:Jt,defaultLoadNode:Kt})}));Ut.displayName=Object(i.d)("ComponentPool");var Wt=Ut,_t=b.h.selectComponent;n(83);var Xt,Yt=Object(l.findUniqueKey)("dragDropDataKey"),Qt=b.h.selectComponent;function $t(e,t){var n=t[Yt];return o.a.createElement("div",{className:Object(i.c)("view-node-tree","drag-node")},n.caption||n.name)}var en="Top",tn="Center",nn="Bottom";var an=(Xt={},p()(Xt,en,Object(i.c)("view-node-item-marker-up")),p()(Xt,nn,Object(i.c)("view-node-item-marker-down")),p()(Xt,tn,Object(i.c)("view-node-item-marker-center")),Xt);function cn(e){var t=Object(l.useState)(!1),n=L()(t,2),a=n[0],c=n[1],r=Object(l.useMemo)((function(){return function(e){var t;return t={},p()(t,Yt,e),p()(t,"dragNode",$t),p()(t,"outAnimate",!0),p()(t,"optionType",g.ComponentNode),p()(t,"type",g.ComponentNode),p()(t,"drop",(function(t,n,a,c){var r=c[Yt];return r&&r!==e&&r.parent})),p()(t,"accept",(function(e,t){if(e.type===g.ComponentNode&&e!==t)return!0})),p()(t,"onDrop",(function(t,n){l.Observe.apply((function(){var t=e.hoverMode,a=n[Yt],c=a.parent;if(t===en){if(a.parent=e.parent,e.parent){var r=c.children.indexOf(a);c.children.splice(r,1);var o=e.parent.children,l=o.indexOf(e);o.splice(l,0,a)}}else if(t===nn){if(a.parent=e.parent,e.parent){var i=c.children.indexOf(a);c.children.splice(i,1);var s=e.parent.children,m=s.indexOf(e);s.splice(m+1,0,a)}}else{var u=c.children.indexOf(a);c.children.splice(u,1),a.parent=e,e.children?e.children.push(a):e.children=[a]}delete e.hoverMode}))})),p()(t,"onDropOver",(function(t,n){var a=t.activeTarget.getBoundingClientRect(),c=a.height/3,r=a.y+a.height;e.parent&&t.y-a.y<c?e.hoverMode=en:e.parent&&r-t.y<c?e.hoverMode=nn:e.hoverMode=tn})),p()(t,"onDropLeave",(function(){delete e.hoverMode})),t}(e)}),[e]);r.drag=!a,r.drop=!a;var m=e.caption||e.name;return o.a.createElement("div",{className:Object(i.c)("view-node-tree-content"),onClick:function(){Qt(e)}},!a&&e.parent?o.a.createElement(Z,{onClick:function(t){t.stopPropagation(),e.remove()}}):null,o.a.createElement(s.DragDrop,{options:r},o.a.createElement("div",{className:Object(i.c)("view-node-tree-item-panel")},o.a.createElement(Oe,{text:m,onChange:function(t){e.caption=t},onModeChange:function(e){c(e)},className:e.hoverStatus?Object(i.c)("view-node-tree-item-drop-over"):""}),o.a.createElement("div",{className:"".concat(Object(i.c)("view-node-item-marker")," ").concat(an[e.hoverMode]||"")}))))}var rn=Object(l.component)((function(e){var t=e.designEngine.rootNode;return dt(),o.a.createElement("div",{className:Object(i.c)("view-node-tree-panel")},o.a.createElement(ae,{className:Object(i.c)("view-node-tree"),node:t,renderNode:function(e){return o.a.createElement(l.MemoComponent,null,(function(){return cn(e)}))},isDirectory:function(e){return!e.parent||e.children&&e.children.length>0}}))}));rn.displayName=Object(i.d)("RenderNodes");var on=rn,ln=(n(84),n(805));n(85);var sn={default:"default",simple:"simple"},mn=Object(l.component)((function(e){var t=e.className,n=e.title,a=e.children,c=e.expand,r=e.readonly,s=e.onExpandChange,m=e.type,u=void 0===m?"default":m,d=f()(e,["className","title","children","expand","readonly","onExpandChange","type"]),p=Object(l.useState)(!!c),v=L()(p,2),g=v[0],b=v[1];Object(l.useLayoutEffect)((function(){b(c)}),[c]);var y={};r||(y.onClick=function(){var e=!g;b(e),"function"==typeof s&&s(e)});var E=sn[u]||"default";return o.a.createElement("div",P()({className:"".concat(Object(i.c)("collapse-panel")," ").concat(Object(i.c)("collapse-panel-".concat(E))," ").concat(t||"")},d),o.a.createElement("header",null,o.a.createElement("div",y,n,o.a.createElement(ln.a,{className:"".concat(Object(i.c)("collapse-icon")," ").concat(Object(i.c)("icon")," ").concat(g?Object(i.c)("icon-revert-90deg"):"")}))),o.a.createElement("div",null,g?function(e){return"function"==typeof e?e():e}(a):null))}));mn.displayName=Object(i.d)("CollapsePanel");var un=mn,dn=(n(86),[{name:jt({lid:"design.editor.autoSave",default:"自动保存"}),value:"Auto"},{name:jt({lid:"design.editor.handSave",default:"手动保存"}),value:"Hand"}]);dn.forEach((function(e){dn[e.value]=e.value}));var pn=dn;n(87);function vn(e,t){if(e)return 2===arguments.length&&Object.defineProperty(e,"_code",{value:t,enumerable:!1,configurable:!0}),e.hasOwnProperty("_code")?e._code:e.origin}var fn=function(e){var t=null==e?void 0:e.compile,n=Object(l.useProps)(),a=n.value,c=n.compileOptions,r=n.onSaved,m=n.disabledRadio,u=Object(l.useState)(pn.Hand),d=L()(u,2),p=d[0],v=d[1],f=Object(l.useState)(!1),g=L()(f,2),b=g[0],y=g[1],E=function(){var e=F()(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0,!1),e.prev=1,a.origin=vn(a),!t){e.next=6;break}return e.next=6,t(a,c);case 6:r&&r(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:y(!1,!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return{header:o.a.createElement("header",{className:"".concat(Object(i.c)("code-editor-header"))},o.a.createElement(Ke.Group,{disabled:m,value:p,style:{position:"relative",top:-1},onChange:function(e){v(e)}},pn.map((function(e,t){return o.a.createElement(Ke,{key:t,value:e.value},e.name)}))),pn.Hand===p?o.a.createElement("div",{style:{float:"right"}},o.a.createElement(s.Loading,{key:"loading",spinning:b,className:Object(i.c)("compiling"),delay:0,overlayStyle:{background:"transparent"},iconSize:12}),o.a.createElement(J,{onClick:E})):null),compiling:b,saveAction:E,actionType:p,source:vn}};function gn(e,t){return b.m.compile(e,t)}var bn=Object(l.component)((function(e){var t=e.value,n=e.onChange,a=e.className,c=e.style,r=e.disabled,s=Object(l.useMemo)((function(){return{actionType:pn.Auto}}),[]);t=t||{};var m=fn({compile:gn}),u=m.header,d=m.actionType,p=m.saveAction,v=m.source,f=v(t);return s.actionType=d,o.a.createElement("div",{className:"".concat(Object(i.c)("code-editor")," ").concat(a||""),style:c},u,o.a.createElement(l.MemoComponent,{dep:[t,f,r]},o.a.createElement(ye,{disabled:r,value:f,onChange:function(e){n&&n(e),l.Observe.silent((function(){v(t,e)})),s.actionType===pn.Auto&&p()}})))})),yn=function(e,t){return b.g.compile(e,t)},En=Object(l.component)((function(e){var t=e.value,n=e.onChange,a=e.className,c=e.style,r=e.disabled,s=Object(l.useMemo)((function(){return{actionType:pn.Auto}}),[]),m=fn({compile:yn}),u=m.header,d=m.actionType,p=m.saveAction,v=m.source;s.actionType=d;var f=v(t);return o.a.createElement("div",{className:"".concat(Object(i.c)("code-editor")," ").concat(a||""),style:c},u,o.a.createElement(l.MemoComponent,{dep:[t,f,r]},o.a.createElement(Ce,{disabled:r,value:f,onChange:function(e){n&&n(e),l.Observe.silent((function(){v(t,e)})),s.actionType===pn.Auto&&p()}})))})),hn=Object(l.component)((function(e){var t=e.value,n=e.onChange,a=e.className,c=e.style,r=e.disabled,s=Object(l.useMemo)((function(){return{actionType:pn.Auto}}),[]);t=t||{};var m=fn(),u=m.header,d=m.actionType,p=m.saveAction,v=m.source,f=v(t);return s.actionType=d,o.a.createElement("div",{className:"".concat(Object(i.c)("code-editor")," ").concat(a||""),style:c},u,o.a.createElement(l.MemoComponent,{dep:[t,f,r]},o.a.createElement(fe,{disabled:r,value:f,onChange:function(e){n&&n(e),l.Observe.silent((function(){v(t,e)})),s.actionType===pn.Auto&&p()}})))})),On=Object(l.component)((function(e){var t=e.rootNode,n=t.context,a=Object(l.useMemo)((function(){return{syncElementResize:!0,modes:["Bottom"]}}),[]),c=t.console.script,r=function(){return o.a.createElement(s.Resize,{options:a},o.a.createElement("div",{className:"".concat(Object(i.c)("editor-wrapper")," ").concat(Object(i.c)("height-transition"))},o.a.createElement(bn,{value:n.script,compileOptions:{console:c}})))};return o.a.createElement(un,{className:Object(i.c)("context-setting"),title:o.a.createElement(jt,{lid:"design.context.initScript"},"初始化脚本")},r)}));On.displayName=Object(i.d)("ContextSetting");var jn,Nn=On,Cn=(n(88),De),Sn=b.i.PropTypes,xn=b.i.getPropValue,kn=b.i.setPropValue,wn={vAlign:"center",className:Object(i.c)("property-editor-item")},Ln={width:"20%",hAlign:"right",style:{minWidth:120},className:Object(i.c)("property-editor-item-name")},In=[{name:"是",value:!0},{name:"否",value:!1}];function Pn(e){return e.caption?e.caption||e.name:o.a.createElement(De,{size:"small",value:e.name,onChange:function(t){l.Observe.applySync((function(){e.name=t.target.value}))}})}var Tn=(jn={},p()(jn,Sn.String,(function(e){var t=e.prop,n=xn(t);return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{disabled:t.readonly,size:"small",value:n,onChange:function(e){l.Observe.applySync((function(){kn(t,e.target.value)}))}})))})),p()(jn,Sn.Number,(function(e){var t=e.prop,n=xn(t);return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(Cn,{disabled:t.readonly,size:"small",value:n,onChange:function(e){l.Observe.applySync((function(){kn(t,e.target.value||0)}))}})))})),p()(jn,Sn.Boolean,(function(e){var t=e.prop,n=xn(t);return o.a.createElement(s.FlexStack.H,P()({},wn,{height:36}),o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,{style:{overflow:"hidden",paddingLeft:12}},o.a.createElement(Ke.Group,{disabled:t.readonly,className:"design-radio-group",value:n,onChange:function(e){kn(t,e)}},In.map((function(e,t){return o.a.createElement(Ke,{key:t,value:e.value},e.name)})))))})),p()(jn,Sn.Enum,(function(e){var t=e.prop,n=e.getPopupContainer,a=t.options;a=a?[].concat(a):[];var c=xn(t);return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(Ge,{disabled:t.readonly,getPopupContainer:n,className:"design-select",size:"small",value:c,onChange:function(e){kn(t,e)}},a.map((function(e,t){return o.a.createElement(Ge.Option,{key:t,value:e.value,name:e.name},e.name)})))))})),p()(jn,Sn.JSON,(function(e){var t=e.prop;return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.Resize,{options:{syncElementResize:!0,modes:["Bottom"]}},o.a.createElement(s.FlexStackItem.H,{className:Object(i.c)("height-transition"),height:200},o.a.createElement(hn,{disabled:t.readonly,value:t.value}))))})),p()(jn,Sn.Module,(function(e){var t=e.prop,n=e.node.document.console.script;return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.Resize,{options:{syncElementResize:!0,modes:["Bottom"]}},o.a.createElement(s.FlexStackItem.H,{height:200,className:Object(i.c)("height-transition")},o.a.createElement(bn,{disabled:t.readonly,value:t.value,compileOptions:{console:n}}))))})),p()(jn,Sn.Style,(function(e){var t=e.prop,n=xn(t);return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.Resize,{options:{syncElementResize:!0,modes:["Bottom"]}},o.a.createElement(s.FlexStackItem.H,{height:200,className:Object(i.c)("height-transition")},o.a.createElement(de,{disabled:t.readonly,value:n,onChange:function(e){l.Observe.applySync((function(){kn(t,e)}))}}))))})),p()(jn,Sn.Runtime,(function(e){var t=e.prop;return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{disabled:t.readonly,size:"small",value:t.contextKey,onChange:function(e){l.Observe.applySync((function(){t.contextKey=e.target.value}))}})))})),p()(jn,Sn.Parent,(function(e){var t=e.prop;return o.a.createElement(s.FlexStack.H,wn,o.a.createElement(s.FlexStackItem.H,Ln,Pn(t)),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{disabled:t.readonly,size:"small",value:t.contextKey,onChange:function(e){l.Observe.applySync((function(){t.contextKey=e.target.value}))}})))})),p()(jn,Sn.Component,(function(e){var t=e.prop;return t.render.apply(this,arguments)})),jn),Fn=n(806),Hn=n(807),Mn=n(808),zn=b.i.PropTypes,Vn=b.i.PropTypeInfos,Dn=b.i.CssPropTypes,An=b.i.getPropType,Rn=b.i.setPropValue;function Bn(){return{name:"",type:zn.String,custom:!0,value:""}}var Kn=Vn.filter((function(e){return Dn.indexOf(e.value)>=0})),Zn={marginBottom:6};function qn(e,t){var n=An(e),a="style"===e.name?Kn:Vn;return o.a.createElement("div",{className:Object(i.c)("property-setting-popover"),onClick:function(e){e.stopPropagation()}},o.a.createElement(s.FlexStack.H,{vAlign:"center",style:Zn},o.a.createElement(s.FlexStackItem.H,{width:80},o.a.createElement(jt,{lid:"design.propertyEdit.propName"},"属性名称"),"："),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{size:"small",value:e.name,onChange:function(t){l.Observe.applySync((function(){e.name=t.target.value}))}}))),o.a.createElement(s.FlexStack.H,{vAlign:"center",style:Zn},o.a.createElement(s.FlexStackItem.H,{width:80},o.a.createElement(jt,{lid:"design.propertyEdit.propDesc"},"属性描述"),"："),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{size:"small",value:e.caption,onChange:function(t){l.Observe.applySync((function(){e.caption=t.target.value}))}}))),o.a.createElement(s.FlexStack.H,{vAlign:"center"},o.a.createElement(s.FlexStackItem.H,{width:80},o.a.createElement(jt,{lid:"design.propertyEdit.propType"},"属性类型"),"："),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(Ge,{size:"small",getPopupContainer:t,className:"design-select",value:n,onChange:function(t){l.Observe.apply((function(){e.type=t,Rn(e,t===zn.Style?{}:"",!0)}))}},a.map((function(t){return t.custom?null:t.value!==zn.Enum||e.options&&0!==e.options.length?o.a.createElement(Ge.Option,{key:t.value,size:"small",value:t.value},t.caption):null}))))))}var Jn=Object(l.component)((function(e){var t=e.rootNode,n=t.activeNode,a=t.runtime,c=(n=n||{}).props;c=c||[];var r=Object(l.useRef)(),m=Object(l.useCallback)((function(){return r.current}),[]);return o.a.createElement("div",{className:Object(i.c)("property-editor"),ref:r},o.a.createElement("header",null,o.a.createElement(Fn.a,{className:"prop-icon",onClick:function(){n.props||(n.props=[Bn()]),c.push(Bn())}})),c.map((function(e,t){var r=An(e),u=Tn[r];if(u)return o.a.createElement(s.FlexStack.H,{key:t,className:Object(i.c)("property-row")},o.a.createElement(s.FlexStackItem.H,null,u({key:t,runtime:a,node:n,getPopupContainer:m,prop:e})),o.a.createElement(l.MemoComponent,null,(function(){var t=Object(l.useComponent)(),n=Object(l.useCallback)((function(){return ze.a.findDOMNode(t)}),[]);return o.a.createElement(s.FlexStackItem.H,{className:Object(i.c)("property-item-ctrl"),vAlign:"center",hAlign:"center",width:45},o.a.createElement(We,{placement:"left",getPopupContainer:n,trigger:"hover",onOpenChange:function(e){s.Resize.enable(!e)},destroyTooltipOnHide:!0,overlayClassName:Object(i.c)("property-item-options-setting"),title:o.a.createElement(jt,{lid:"design.propertyEdit.propSetting"},"属性设置"),content:qn(e,n)},o.a.createElement(Hn.a,{className:"prop-icon prop-icon-setting ".concat(e.readonly?Object(i.c)("disabled"):"")})),o.a.createElement(Mn.a,{disabled:e.readonly,className:"prop-icon",onClick:function(){var t=c.indexOf(e);t>=0&&c.splice(t,1)}}))})))})))}));Jn.displayName=Object(i.d)("PropertyEditor");var Gn=Jn,Un=(n(89),{syncElementResize:!0,modes:["Bottom"]}),Wn=Object(l.component)((function(e){var t=e.rootNode,n=t.activeNode;if(!n)return null;var a=t.console.script;return o.a.createElement("div",{className:Object(i.c)("render-generator")},o.a.createElement(s.Resize,{options:Un},o.a.createElement("div",{className:"".concat(Object(i.c)("editor-wrapper")," ").concat(Object(i.c)("height-transition"))},o.a.createElement(bn,{value:n.generateScript,compileOptions:{console:a}}))))}));Wn.displayName=Object(i.d)("RenderGenerator");var _n=Wn,Xn=(n(90),Object(l.component)((function(e){var t=e.rootNode,n=t.activeNode,a=Object(l.useMemo)((function(){return{syncElementResize:!0,modes:["Bottom"]}}),[]);if(!n)return null;var c=l.Observe.silent((function(){return n.css||(n.css={}),n.css})),r=t.console.style,m={selector:n.getSymbol("cssSelector"),console:r};return o.a.createElement("div",{className:Object(i.c)("node-css-editor")},o.a.createElement("header",null,o.a.createElement(Be,{multi:!0,value:!!c.flatMode,onChange:function(e){c.flatMode=!e}},o.a.createElement(jt,{lid:"design.styleSetting.flatMode"},"平铺模式"))),o.a.createElement(s.Resize,{options:a},o.a.createElement("div",{className:"".concat(Object(i.c)("editor-wrapper")," ").concat(Object(i.c)("height-transition"))},o.a.createElement(En,{compileOptions:m,value:c}))))}))),Yn=(n(91),n(92),b.d.syncImportMap);function Qn(e){return{path:e.path,name:e.name||e.caption}}function $n(e){return ea.apply(this,arguments)}function ea(){return(ea=F()(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.asyncWrapper)(b.a.load(t.namespace,t.version,t.module));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ta=Object(l.component)((function(e){var t=e.rootNode,n=t.context.imports,a=Object(l.useState)(!1),c=L()(a,2),r=c[0],m=c[1],u=Object(l.useState)(!1),d=L()(u,2),p=d[0],v=d[1],f=Object(l.useMemo)((function(){return{drag:!1,drop:function(e,t,n,a){return a.optionType===g.ComponentConfig},onDrop:function(e,a){return F()(M.a.mark((function e(){var c,r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.data,m(!1),r=Qn(c),o=t.componentTypes[r.path]=c.component.type,n.push(r),v(!0),e.next=8,$n(o);case 8:v(!1),Yn(t);case 10:case"end":return e.stop()}}),e)})))()},onDropEnter:function(){m(!0,!1)},onDropLeave:function(){m(!1)}}}),[n]),b=function(){return o.a.createElement("div",{className:Object(i.c)("design-import-item-wrapper")},o.a.createElement(s.Loading,{spinning:p,iconSize:60},o.a.createElement(s.DragDrop,{options:f},o.a.createElement("ul",null,n.map((function(e,a){return o.a.createElement("li",{key:a},o.a.createElement("div",{title:e.path,className:Object(i.c)("design-import-path")},e.path),o.a.createElement("div",{className:Object(i.c)("design-import-remove")},o.a.createElement(Mn.a,{onClick:function(){var a=n.indexOf(e);a>=0&&(n.splice(a,1),Yn(t))}})),o.a.createElement("div",null,o.a.createElement(Oe,{text:e.name,onChange:function(n){e.name=n,Yn(t)}})))}))))))};return o.a.createElement(un,{expand:!0,className:"".concat(Object(i.c)("design-import-setting")," ").concat(r?Object(i.c)("design-import-setting-drop-active"):""),title:o.a.createElement(jt,{lid:"design.context.importResource"},"导入资源")},b)}));ta.displayName=Object(i.d)("ImportSetting");var na=ta,aa=(n(93),b.h.refreshLifetime),ca=Object(l.component)((function(e){var t=e.rootNode,n=t.activeNode,a=Object(l.useMemo)((function(){return{syncElementResize:!0,modes:["Bottom"]}}),[]);if(!n)return null;var c=t.console.script;return o.a.createElement("div",{className:Object(i.c)("design-hooks-setting")},o.a.createElement(s.Resize,{options:a},o.a.createElement("div",{className:"".concat(Object(i.c)("editor-wrapper")," ").concat(Object(i.c)("height-transition"))},o.a.createElement(bn,{value:n.hooksScript,compileOptions:{console:c},disabledRadio:!0,onSaved:function(){aa(n)}}))))})),ra=(n(94),Object(l.component)((function(e){var t=e.rootNode,n=t.activeNode;if(!n)return null;var a=t.componentTypes[n.path],c=n.caption||n.name;return o.a.createElement("div",{className:Object(i.d)("design-node-info")},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.id"},"节点ID"),"："),o.a.createElement("div",null,n.renderId)),o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.name"},"节点名称"),"："),o.a.createElement("div",null,o.a.createElement(Oe,{text:c,onChange:function(e){n.caption=e}}))),o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.compType"},"组件类型"),"："),o.a.createElement("span",null,a.type)),a.domain?o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.pkgName"},"组件包名"),"："),o.a.createElement("span",null,a.namespace)):null,o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.compName"},"组件名称"),"："),o.a.createElement("span",null,a.module)),a.version?o.a.createElement("li",null,o.a.createElement("label",null,o.a.createElement(jt,{lid:"design.nodeInfo.compVersion"},"组件版本"),"："),o.a.createElement("span",null,a.version)):null))})));ra.displayName=Object(i.d)("ComponentSource");var oa=ra,la=(n(95),n(96),n(809)),ia=b.b.getScriptValue,sa=b.b.setScriptValue,ma=jt({lid:"design.dataCollect.renderFunc.tips",default:"/**\n * 自定义函数渲染脚本\n * @param name 对应字段名称\n * @param element 原始组件元素\n * @param errorInfo 错误信息，\n    验证失败后为对应的规则消息名称\n */\n  module.exports = \n  function(name,element,errorInfo){\n    return element;\n  }\n"}),ua=[{caption:o.a.createElement(jt,{lid:"design.dataCollect.enableStatus"},"启用状态"),renderType:"Boolean",name:"enabled",help:o.a.createElement(jt,{lid:"design.dataCollect.enableStatus.tips"},"启用后才会进行数据收集和验证")},{caption:o.a.createElement(jt,{lid:"design.dataCollect.groupName"},"分组名称"),placeholder:jt({lid:"design.dataCollect.groupName.placeholder",default:"请输入校验器分组名称"}),renderType:"String",name:"group"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.fieldName"},"字段名称"),placeholder:jt({lid:"design.dataCollect.fieldName.placeholder",default:"请输入字段名称，默认为节点ID"}),renderType:"String",name:"name"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.containerWrapper"},"容器包裹"),renderType:"Boolean",default:!0,help:jt({lid:"design.dataCollect.containerWrapper.tips",default:"是否用对原始组件进行包裹，默认会对组件用div进行包裹，并添加异常提示元素"}),name:"wrapper"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.nameParse"},"名称解析"),renderType:"Boolean",default:!0,help:o.a.createElement(jt,{lid:"design.dataCollect.nameParse.tips"},"是否对如a.b.c等格式名称按层次结构生成数据结构"),name:"parseName"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.valueProp"},"取值名称"),placeholder:jt({lid:"design.dataCollect.valueProp.placeholder",default:"请输入值对应属性名称，默认为value"}),renderType:"String",name:"valuePropName"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.changeProp"},"事件名称"),placeholder:jt({lid:"design.dataCollect.changeProp.placeholder",default:"请输入事件名称，默认为onChange"}),renderType:"String",name:"changeTrigger"},{caption:o.a.createElement(jt,{lid:"design.dataCollect.renderFunc"},"渲染函数"),renderType:"Script",help:o.a.createElement("div",{className:Object(i.c)("collect-tooltip-pre")},ma),name:"render"}],da={syncElementResize:!0,modes:["Bottom"]};function pa(e,t,n){var a=n.getPopupContainer;return o.a.createElement(s.FlexStackItem.H,{width:80,hAlign:"right"},t.help?o.a.createElement(Xe,{arrow:!0,mouseEnterDelay:.6,placement:"right",title:o.a.createElement("span",{className:Object(i.c)("collect-help-text")},t.help),getPopupContainer:a},o.a.createElement(la.a,{className:Object(i.c)("collect-help-icon")})):null,t.caption,"：")}var va={Boolean:function(e,t,n){n.getPopupContainer;var a=t.name,c=t.default?!1!==e[a]:!!e[a];return o.a.createElement(s.FlexStack.H,{key:a,vAlign:"center",className:Object(i.c)("collect-option-row")},pa.apply(null,arguments),o.a.createElement(s.FlexStackItem.H,{style:{overflow:"hidden"}},o.a.createElement(Be,{className:Object(i.c)("collect-checkbox"),value:c,onChange:function(){e[a]=!c}},o.a.createElement(jt,{lid:"design.dataCollect.yes"},"是"))))},String:function(e,t){var n=t.name,a=t.placeholder;return o.a.createElement(s.FlexStack.H,{key:n,vAlign:"center",className:Object(i.c)("collect-option-row")},pa.apply(null,arguments),o.a.createElement(s.FlexStackItem.H,null,o.a.createElement(De,{size:"small",placeholder:a,value:e[n],onChange:function(t){l.Observe.applySync((function(){e[n]=t.target.value}))}})))},Script:function(e,t){var n=t.name;return o.a.createElement(s.FlexStack.H,{key:n,vAlign:"center",className:Object(i.c)("collect-option-row")},pa.apply(null,arguments),o.a.createElement(s.Resize,{options:da},o.a.createElement(s.FlexStackItem.H,{height:120},o.a.createElement(ye,{value:ia(e,n),onChange:function(t){l.Observe.applySync((function(){sa(e,n,t)}))}}))))}},fa=Object(l.component)((function(e){var t=e.config,n=Object(l.useRef)(),a=Object(l.useCallback)((function(){return n.current}),[n]),c=ua.slice(0,3),r=ua.slice(3);return o.a.createElement("div",{ref:n,className:Object(i.c)("collect-config-items")},c.map((function(e){return va[e.renderType](t,e,{getPopupContainer:a})})),o.a.createElement(un,{title:o.a.createElement(jt,{lid:"design.dataCollect.moreOption"},"更多选项"),type:"simple"},r.map((function(e){return va[e.renderType](t,e,{getPopupContainer:a})}))))}));fa.displayName=Object(i.d)("ConfigItems");var ga=fa,ba=(n(97),b.b.getScriptValue),ya=b.b.setScriptValue,Ea={syncElementResize:!0,modes:["Bottom"]},ha=[{name:jt({lid:"design.dataCollect.ruleSetting.required",default:"必选"}),value:"required"},{name:jt({lid:"design.dataCollect.ruleSetting.min",default:"最少字符"}),value:"min"},{name:jt({lid:"design.dataCollect.ruleSetting.max",default:"最多字符"}),value:"max"},{name:jt({lid:"design.dataCollect.ruleSetting.regexp",default:"正则"}),value:"regexp"},{name:jt({lid:"design.dataCollect.ruleSetting.func",default:"函数"}),value:"fn"}];var Oa=Object(l.component)((function(e){var t=e.config.rules,n=Object(l.useRef)(),a=Object(l.useState)(!1),c=L()(a,2),r=c[0],m=c[1],u=Object(l.useCallback)((function(){return n.current}),[n]),d=function(e,n){return o.a.createElement("div",{className:Object(i.c)("collect-rule-item-wrapper"),key:n},o.a.createElement(s.FlexStack.H,{vAlign:"center",className:Object(i.c)("collect-option-row")},o.a.createElement(s.FlexStackItem.H,{width:120,hAlign:"right"},o.a.createElement(Ge,{className:Object(i.c)("collect-select"),size:"small",getPopupContainer:u,value:e.type,onChange:function(t){e.type=t,e.value=""}},ha.map((function(e){return o.a.createElement(Ge.Option,{value:e.value,key:e.value},e.name)})))),o.a.createElement(s.FlexStackItem.H,{className:Object(i.c)("collect-input-wrapper")},function(e){var t=e.type;if("required"===t){var n=!!e.value;return o.a.createElement(Be,{className:Object(i.c)("collect-checkbox"),value:n,onChange:function(){e.value=!n}},o.a.createElement(jt,{lid:"design.dataCollect.ruleSetting.requiredValue"},"必填"))}return["min","max"].indexOf(t)>=0?o.a.createElement(De,{size:"small",placeholder:jt({lid:"design.dataCollect.inputPlaceholder",default:"请输入"}),value:e.value,onChange:function(t){l.Observe.applySync((function(){e.value=t.target.value}))}}):"regexp"===t?o.a.createElement(De,{size:"small",value:e.value,placeholder:jt({lid:"design.dataCollect.ruleSetting.regexp.placeholder",default:"请输入正则字符串"}),onChange:function(t){l.Observe.applySync((function(){e.value=t.target.value}))}}):"fn"===t?o.a.createElement(s.Resize,{options:Ea},o.a.createElement(ye,{style:{height:120},value:ba(e,"value"),onChange:function(t){l.Observe.applySync((function(){ya(e,"value",t)}))}})):null}(e)),o.a.createElement(s.FlexStackItem.H,{width:30,hAlign:"center"},o.a.createElement(Mn.a,{onClick:function(){var n=t.indexOf(e);n>=0&&t.splice(n,1)}}))),o.a.createElement(s.FlexStack.H,{vAlign:"center",className:Object(i.c)("collect-option-row")},o.a.createElement(De,{size:"small",placeholder:jt({lid:"design.dataCollect.ruleSetting.messagePlaceholder",default:"请输入提示信息"}),value:e.message,onChange:function(t){l.Observe.applySync((function(){e.message=t.target.value}))}})))};return o.a.createElement("div",{ref:n,className:Object(i.c)("collect-rules-collapse-wrapper")},o.a.createElement(un,{className:Object(i.c)("collect-rules-collapse"),expand:r,onExpandChange:function(e){m(e)},title:o.a.createElement("div",{className:Object(i.c)("collect-rule-opt")},o.a.createElement(Fn.a,{className:Object(i.c)("collect-add-rule"),onClick:function(e){e.stopPropagation(),t.push({type:"required",value:!0,message:""}),r||m(!0)}})," ",o.a.createElement(jt,{lid:"design.dataCollect.ruleSetting"},"规则配置"))},o.a.createElement("div",{className:Object(i.c)("collect-rules-wrapper")},t.map((function(e,t){return d(e,t)})))))}));Oa.displayName=Object(i.d)("CollectDataRules");var ja=Oa,Na=n(810),Ca=b.b.syncRuntimeCollectConfig,Sa=Object(l.component)((function(e){var t=Object(l.useRef)(),n=e.rootNode.activeNode,a=Object(l.useCallback)((function(){return t.current}),[t]);Object(l.useLayoutEffect)((function(){n.collectConfig||(n.collectConfig={rules:[]})}),[n]);var c=n.collectConfig;return c?o.a.createElement("div",{ref:t,className:Object(i.c)("design-collect-option")},o.a.createElement(l.MemoComponent,{dep:[]},(function(){var e=Object(l.useState)(!1),t=L()(e,2),c=t[0],r=t[1];return o.a.createElement(Xe,{placement:"right",mouseEnterDelay:.6,title:o.a.createElement("span",{className:Object(i.c)("collect-tooltip-text")},o.a.createElement(jt,{lid:"design.dataCollect.sync"},"同步")),getPopupContainer:a},o.a.createElement(Na.a,{className:"".concat(Object(i.c)("design-collect-sync-icon")," ").concat(c?Object(i.c)("design-collect-sync-icon-loading"):""),onClick:F()(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,Ca(n);case 3:r(!1);case 4:case"end":return e.stop()}}),e)})))}))})),o.a.createElement(ga,{config:c}),o.a.createElement(ja,{config:c})):null}));Sa.displayName=Object(i.d)("CollectOption");var xa=Sa,ka=b.h.getNodeHooks,wa=b.e.injector;var La,Ia,Pa=(La=[],Ia=[{name:o.a.createElement(jt,{lid:"design.context.setting"},"上下文设置"),key:"ContextSetting",render:function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(na,{rootNode:t}),o.a.createElement(Nn,{rootNode:t}))}},{name:o.a.createElement(jt,{lid:"design.nodeInfo"},"节点信息"),key:"ComponentInfo",render:function(e,t){return o.a.createElement(oa,{rootNode:t})}},{name:o.a.createElement(jt,{lid:"design.node.hooksScript"},"Hooks脚本"),key:"NodeHooksScript",render:function(e,t){return o.a.createElement(ca,{rootNode:t})}},{name:o.a.createElement(jt,{lid:"design.propertyEdit"},"属性编辑"),key:"PropertyEditor",render:function(e,t){return o.a.createElement(Gn,{rootNode:t})}},{name:o.a.createElement(jt,{lid:"design.generator"},"生成器"),key:"RenderGenerator",render:function(e,t){return t.activeNode&&t.activeNode!==t?o.a.createElement(_n,{rootNode:t}):null}},{name:o.a.createElement(jt,{lid:"design.styleSetting"},"样式设置"),key:"CSSEditor",render:function(e,t){return o.a.createElement(Xn,{rootNode:t})}},{name:o.a.createElement(jt,{lid:"design.dataCollect"},"数据收集"),key:"CollectOption",render:function(e,t){return o.a.createElement(xa,{rootNode:t})}}],{reset:function(){La=[].concat(Ia)},config:{addItem:function(e){if(e){var t=e.name,n=e.key,a=e.render;La.push({name:t,key:n,render:a})}}},beforeRender:function(){var e=wa.hooks.beforePropertyPanelRender;"function"==typeof e&&e(La)},renderItems:function(e){return function(e,t){return t.map((function(t){var n=t.name,a=t.key,c=void 0===a?n:a,r=t.render,l="function"==typeof r?r(e.activeNode,e):null;return l?o.a.createElement(oe.Panel,{key:c,header:n},l):null}))}(e,La)}}),Ta=Object(l.component)((function(e){var t=e.designEngine.rootNode;Pa.reset(),function(e,t){var n=t.activeNode;if(!n)return[];var c,r=ka(n,"PropertyPanel");r&&(c=r.fn)&&Object(l.safeApply)(c,[n,e,{components:a}])}(Pa.config,t);var n=o.a.createElement("div",null,o.a.createElement(jt,{lid:"design.propertyPanel"},"属性面板"));Pa.beforeRender();var c=Pa.renderItems(t);return o.a.createElement(Le,{title:n,className:Object(i.c)("i-design","prop-editor")},o.a.createElement(oe,{bordered:!1,defaultActiveKey:["PropertyEditor"]},c))}));Ta.displayName=Object(i.d)("RightPanel");var Fa=Ta,Ha=(n(98),{syncElementResize:!0,overlay:!1,modes:["Bottom"]}),Ma={syncElementResize:!0,index:300,overlay:!1,modes:["Right"]},za=Object(l.component)((function(e){var t=e.items,n=e.renderProps,a=t.length;return o.a.createElement(s.FlexStack.V,null,t.map((function(e){var t=e.props||{},c=o.a.createElement(s.FlexStackItem.V,P()({style:{position:"relative"},height:1!==a?e.height:"",key:e.key},t),e.render(n));return e.resize?o.a.createElement(s.Resize,{options:Ha,key:e.key},c):c})))})),Va=Object(l.component)((function(e){var t=e.designEngine,n=e.componentConfig,a=e.control.left.items.filter((function(e){return!e.hidden}));if(0===a.length)return null;var c={designEngine:t,componentConfig:n};return o.a.createElement(s.Resize,{options:Ma},o.a.createElement(s.FlexStackItem.H,{width:vt,className:Object(i.c)("i-design","left-panel")},o.a.createElement(za,{items:a,renderProps:c})))}));Va.Control=Object(l.component)((function(e){var t=e.control;return o.a.createElement(s.FlexStackItem.H,{width:16,className:Object(i.c)("left-layout-control")},o.a.createElement(Ze,{items:t.left.items}))}));var Da=Object(l.component)((function(e){var t=e.designEngine,n=e.control.right.items.filter((function(e){return!e.hidden})),a=Object(l.useMemo)((function(){return{index:300,overlay:!1,modes:["Left"],onResize:function(e,t){var n=t.tx,a=t.originWidth,c=e.resizeElement,r=a-n;r<ft&&(r=ft),c.style.width="".concat(r,"px")}}}),[]);if(0===n.length)return null;var c={designEngine:t};return o.a.createElement(s.Resize,{options:a},o.a.createElement(s.FlexStackItem.H,{width:ft,className:Object(i.c)("i-design","right-layout")},o.a.createElement(za,{items:n,renderProps:c})))}));Da.displayName=Object(i.c)("DesignRightLayout"),Da.Control=Object(l.component)((function(e){var t=e.control;return o.a.createElement(s.FlexStackItem.H,{width:16,className:Object(i.c)("right-layout-control")},o.a.createElement(Ze,{items:t.right.items}))}));var Aa=function(){var e=Object(l.useProps)(),t=Object(l.useMemo)((function(){return{customCompTabs:[]}}),[]);return e.hasOwnProperty("customCompTabs")&&(t.customCompTabs=e.customCompTabs),{layoutControl:Object(l.useMemo)((function(){return Object(l.Observe)({left:{items:[{caption:o.a.createElement(jt,{lid:"design.control.comp"},"组件"),key:"Component",hidden:!1,resize:!0,height:"60%",props:{className:Object(i.c)("i-design","component-list-wrapper")},render:function(e){var n=e.componentConfig;return o.a.createElement(l.MemoComponent,null,(function(){var e=Object(l.useMemo)((function(){return[{title:o.a.createElement(jt,{lid:"design.components.headerTitle"},"组件列表"),render:function(){return o.a.createElement(Wt,{config:n})}}].concat(t.customCompTabs||[])}),[t.customCompTabs]),a=Object(l.useState)(e[0]),c=L()(a,2),r=c[0],s=c[1],m={width:"".concat(100/e.length,"%")},u=o.a.createElement("div",{className:Object(i.c)("components-tabs")},e.map((function(t,n){return o.a.createElement("div",{className:"".concat(Object(i.c)("components-tab")," ").concat(e.length>1&&t===r?Object(i.c)("components-tab-active"):""),style:m,key:n,onClick:function(){t!==r&&s(t)}},t.title)})));return o.a.createElement(Le,{className:Object(i.c)("component-tabs-header"),title:u},r.render())}))}},{caption:jt({lid:"design.control.node",default:"节点"}),key:"node",hidden:!1,render:function(e){var t=e.designEngine;return o.a.createElement(Le,{title:[o.a.createElement("span",{key:"txt"},o.a.createElement(jt,{lid:"design.dom.headerTitle"},"节点")),o.a.createElement(V,{key:"icon",onClick:function(){var e;(e=t.rootNode).children=[],_t(e)}})]},o.a.createElement(on,{designEngine:t}))}}]},right:{items:[{caption:o.a.createElement(jt,{lid:"design.control.prop"},"属性"),key:"Property",hidden:!1,render:function(e){var t=e.designEngine;return o.a.createElement(Fa,{designEngine:t})}}]}},{autoApply:!0,autoApplyThrottle:!1}).data()}),[])}},Ra=n(127),Ba=Object(l.component)((function(e){var t=e.designEngine;return o.a.createElement(s.FlexStackItem.H,{className:Object(i.c)("i-design","canvas")},o.a.createElement(Lt,{designEngine:t},o.a.createElement(kt,{designEngine:t})))}));Ba.displayName=Object(i.d)("DesignCanvasLayout");var Ka=Object(l.component)((function(e){return o.a.createElement(Ra.a,{prefixCls:i.b,iconPrefixCls:i.a},e.children())})),Za=Object(l.component)((function(e){var t=e.componentConfig,n=e.designId,a=void 0===n?"default":n,c=e.json,r=e.className,m=e.header;Object(l.useEffect)((function(){var e=new y.c;return e.register("click:compClick",(function(t){return y.a.findUpUtil(t.target,(function(e){var t=b.o.componentNode(e);if(t&&t.getEnvOptions().designMode)return!!e}),(function(t){return t===e.getProxyElement()}))})),e.on("compClick",(function(e){var t=e.target,n=b.o.componentNode(t);b.h.selectComponent(n)})),e.mount(document.body),function(){e.unmount()}}),[]);var u=Aa().layoutControl,d=Object(l.useMemo)((function(){return He.create({datasource:He.createDatasourceById(a,c)})}),[a,c]);pt(d);var p=d.viewSetting;return o.a.createElement("div",{className:"".concat(Object(i.c)("i-design")," \n      ").concat(Object(i.c)("i-design","design-mode")," \n      ").concat(p.fullscreen?Object(i.c)("i-design","fullscreen"):"","\n      ").concat(r||"","\n    ")},o.a.createElement(s.FlexStack.V,{key:"Content",style:{overflow:"hidden"}},m,o.a.createElement(s.FlexStackItem.V,{flowMode:"horizontal"},o.a.createElement(Va.Control,{control:u}),o.a.createElement(Va,{componentConfig:t,control:u,designEngine:d}),o.a.createElement(Ba,{designEngine:d}),o.a.createElement(Da,{designEngine:d,control:u}),o.a.createElement(Da.Control,{control:u})),o.a.createElement(s.FlexStackItem.V,{height:"auto",className:Object(i.c)("i-design","bottom-layout")},o.a.createElement(At,{designEngine:d}))))}));Za.displayName=Object(i.d)("CodeDesign");var qa=function(e){return o.a.createElement(Ka,null,(function(){return o.a.createElement(Za,e)}))},Ja=(n(37),n(217));t.default=Object(l.component)((function(e){return o.a.createElement("div",{className:"application"},o.a.createElement(c.Default,{componentConfig:Ja.a}))}))}}]);